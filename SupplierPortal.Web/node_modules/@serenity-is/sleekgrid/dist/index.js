var Le=class{constructor(){this.__nonDataRow=!0}},lt="slick-edit-preclick";var at={nameIsHtml:!1,resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,defaultSortAsc:!0,focusable:!0,selectable:!0};function ht(l,e){var n;for(var t={},i=0;i<l.length;i++){var o=l[i];if(e!=null)for(var s in e)o[s]===void 0&&(o[s]=e[s]);if(o.minWidth&&o.width<o.minWidth&&(o.width=o.minWidth),o.maxWidth&&o.width>o.maxWidth&&(o.width=o.maxWidth),o.id==null||t[o.id]){let a=o.id!=null&&o.id.length?o.id:o.field!=null?o.field:"col";for(var r=0;t[o.id=a+(r==0?"":"_"+r.toString())];)r++}t[o.id]=!0,o.name===void 0&&(o.name=ai((n=o.field)!=null?n:o.id),delete o.nameIsHtml)}}function ai(l){return l&&(l=(""+l).replace(/([A-Z]+)([A-Z][a-z])/,"$1_$2").replace(/([a-z\d])([A-Z])/,"$1_$2").replace(/[-\s]/,"_").toLowerCase(),l.replace(/\s/,"_").split("_").filter(e=>e.length).map(e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()).join(" "))}var Ye=class{isActive(e){return e?this.activeEditController===e:this.activeEditController!=null}activate(e){if(e!==this.activeEditController){if(this.activeEditController!=null)throw"SleekGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!e.commitCurrentEdit)throw"SleekGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!e.cancelCurrentEdit)throw"SleekGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";this.activeEditController=e}}deactivate(e){if(this.activeEditController!==e)throw"SleekGrid.EditorLock.deactivate: specified editController is not the currently active one";this.activeEditController=null}commitCurrentEdit(){return this.activeEditController?this.activeEditController.commitCurrentEdit():!0}cancelCurrentEdit(){return this.activeEditController?this.activeEditController.cancelCurrentEdit():!0}},dt=new Ye;var Te=class{constructor(){this._isPropagationStopped=!1;this._isImmediatePropagationStopped=!1}stopPropagation(){this._isPropagationStopped=!0}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}},L=class{constructor(){this._handlers=[]}subscribe(e){this._handlers.push(e)}unsubscribe(e){for(var t=this._handlers.length-1;t>=0;t--)this._handlers[t]===e&&this._handlers.splice(t,1)}notify(e,t,i){t=hi(t)||new Te,i=i||this;for(var o,s=0;s<this._handlers.length&&!(t.isPropagationStopped()||t.isImmediatePropagationStopped());s++)o=this._handlers[s].call(i,t,e);return o}clear(){this._handlers=[]}},Ce=class{constructor(){this._handlers=[]}subscribe(e,t){return this._handlers.push({event:e,handler:t}),e.subscribe(t),this}unsubscribe(e,t){for(var i=this._handlers.length;i--;)if(this._handlers[i].event===e&&this._handlers[i].handler===t)return this._handlers.splice(i,1),e.unsubscribe(t),this;return this}unsubscribeAll(){for(var e=this._handlers.length;e--;)this._handlers[e].event.unsubscribe(this._handlers[e].handler);return this._handlers=[],this}},_i={BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGEDOWN:34,PAGEUP:33,RIGHT:39,TAB:9,UP:38};function ut(){return!0}function ct(){return!1}function hi(l){if(l==null)return l;!l.isDefaultPrevented&&l.preventDefault&&(l.isDefaultPrevented=function(){return this.defaultPrevented});var e,t;return!l.isImmediatePropagationStopped&&(e=l.stopImmediatePropagation)&&(l.isImmediatePropagationStopped=ct,l.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=ut,e.call(this)}),!l.isPropagationStopped&&(t=l.stopPropagation)&&(l.isPropagationStopped=ct,l.stopPropagation=function(){this.isPropagationStopped=ut,t.call(this)}),l}function ne(l,e){if(!(e==null||!e.length))if(e.indexOf(" ")>=0){var t=e.split(" ").map(o=>o.trim()).filter(o=>o.length);for(var i of t)l.classList.add(i)}else l.classList.add(e)}var di={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"};function ui(l){return di[l]}function G(l){return!arguments.length&&this&&(l=this.value),l==null?"":(typeof l!="string"&&(l=""+l),l.replace(/[<>"'&]/g,ui))}function gt(l){return(l!=null?l:"").replace(/(\b)(on[a-z]+)(\s*)=|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;)(\/*)(script|script defer)(.*)(&gt;|&gt;">)/gi,"")}function He(l){l&&(l.setAttribute("unselectable","on"),l.style.userSelect="none",l.addEventListener("selectstart",()=>!1))}function De(l,e){if(!(e==null||!e.length))if(e.indexOf(" ")>=0){var t=e.split(" ").map(o=>o.trim()).filter(o=>o.length);for(var i of t)l.classList.remove(i)}else l.classList.remove(e)}function p(l,e,...t){var i=document.createElement(l),o,s,r;if(e){for(o in e)if(s=e[o],s!=null&&s!==!1){if(o==="ref"&&typeof s=="function"){s(i);continue}var n=o==="className"?"class":o;i.setAttribute(n,s===!0?"":s)}}return t&&t.length&&i.append(...t),i}function ge(l){return p("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:l})}function k(l){var e=parseFloat(l);return isNaN(e)?0:e}function Ie(l){return G(l.value)}function le(l){return l==null?null:function(e){var t=l(e.row,e.cell,e.value,e.column,e.item,e.grid);return t!=null&&typeof t!="string"&&Object.prototype.toString.call(t)==="[object Object]"?(e.addClass=t.addClasses,e.tooltip=t.toolTip,t.text):t}}function pt(l,e,t){var a,h;var i=t.dataset.fmtatt;if((i==null?void 0:i.length)>0){for(var o of i.split(","))t.removeAttribute(o);delete t.dataset.fmtatt}var s=t.dataset.fmtcls;s!=null&&s.length&&l.addClass!=s&&(De(t,s),(a=l.addClass)!=null&&a.length||delete t.dataset.fmtcls);var r=t.getAttribute("tooltip");if(r!=null&&l.tooltip!=r&&t.removeAttribute("tooltip"),l.tooltip!==void 0&&r!=l.tooltip&&t.setAttribute("tooltip",l.tooltip),e==null?t.innerHTML="":e instanceof Node?t.appendChild(e):t.innerHTML=""+e,l.addAttrs!=null){var n=Object.keys(l.addAttrs);if(n.length){for(var o of n)t.setAttribute(o,l.addAttrs[o]);t.dataset.fmtatt=n.join(",")}}(h=l.addClass)!=null&&h.length&&(ne(t,l.addClass),t.dataset.fmtcls=l.addClass)}var xe=class extends Le{constructor(){super(...arguments);this.__group=!0;this.level=0;this.count=0;this.collapsed=!1;this.rows=[]}equals(t){return this.value===t.value&&this.count===t.count&&this.collapsed===t.collapsed&&this.title===t.title}},mt=class extends Le{constructor(){super(...arguments);this.__groupTotals=!0;this.initialized=!1}};var pe=class{constructor(e,t,i,o){i===void 0&&o===void 0&&(i=e,o=t),this.fromRow=Math.min(e,i),this.fromCell=Math.min(t,o),this.toRow=Math.max(e,i),this.toCell=Math.max(t,o)}isSingleRow(){return this.fromRow==this.toRow}isSingleCell(){return this.fromRow==this.toRow&&this.fromCell==this.toCell}contains(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell}toString(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}};var vt={addNewRowCssClass:"new-row",alwaysAllowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,asyncEditorLoadDelay:100,asyncEditorLoading:!1,asyncPostCleanupDelay:40,asyncPostRenderDelay:-1,autoEdit:!0,autoHeight:!1,cellFlashingCssClass:"flashing",dataItemColumnValueExtractor:null,defaultColumnWidth:80,defaultFormat:Ie,editable:!1,editorFactory:null,editorLock:dt,enableAddRow:!1,enableAsyncPostRender:!1,enableAsyncPostRenderCleanup:!1,enableCellNavigation:!0,enableColumnReorder:!0,enableTabKeyNavigation:!0,enableTextSelectionOnCells:!1,explicitInitialization:!1,footerRowHeight:30,forceFitColumns:!1,forceSyncScrolling:!1,forceSyncScrollInterval:250,formatterFactory:null,fullWidthRows:!1,groupingPanel:!1,groupingPanelHeight:30,headerRowHeight:30,leaveSpaceForNewRows:!1,minBuffer:3,multiColumnSort:!1,multiSelect:!0,renderAllCells:!1,rowHeight:30,selectedCellCssClass:"selected",showCellSelection:!0,showColumnHeader:!0,showFooterRow:!1,showGroupingPanel:!0,showHeaderRow:!1,showTopPanel:!1,suppressActiveCellChangeOnEdit:!1,topPanelHeight:30,useLegacyUI:!1,useCssVars:!1};var $e=function(){var l,e,t,i,o,s,r,n,a,h,u;function v(E){l=E;let F=y()+l.getScrollDims().width+"px",A=l.getOptions(),W=A.useLegacyUI?" ui-state-default":"";o=p("div",{class:"slick-header-columns",style:(A.rtl?"right":"left")+":-1000px"});var oe=p("div",{class:"slick-header"+W,style:!A.showColumnHeader&&"display: none"},o);w(),s=p("div",{class:"slick-headerrow-columns"}),r=ge(F);var ae=p("div",{class:"slick-headerrow"+W,style:!A.showHeaderRow&&"display: none"},s,r);h=p("div",{class:"slick-top-panel",style:"width: 10000px"});var he=p("div",{class:"slick-top-panel-scroller"+W,style:!A.showTopPanel&&"display: none"},h);i=p("div",{class:"grid-canvas",tabIndex:"0",hideFocus:""}),u=p("div",{class:"slick-viewport",tabIndex:"0",hideFocus:""},i),n=p("div",{class:"slick-footerrow-columns"}),a=ge(F);var j=p("div",{class:"slick-footerrow"+W,style:!A.showFooterRow&&"display: none"},n,a);l.getContainerNode().append(oe,ae,he,u,j)}function c(E,F){F&&i.appendChild(F)}function m(){var E=0,F,A,W=l.getColumns(),oe=l.getOptions(),ae=oe.rtl;if(oe.useCssVars)for(var he=l.getContainerNode().style,j=0;j<W.length;j++){F=W[j].width;var ue="--l"+j,Ee=he.getPropertyValue(ue),ce=E+"px";Ee!==ce&&he.setProperty(ue,ce),ue="--r"+j,Ee=he.getPropertyValue(ue),ce=e-E-F+"px",Ee!==ce&&he.setProperty(ue,ce),E+=F}else for(var j=0;j<W.length;j++)F=W[j].width,A=l.getColumnCssRules(j),A[ae?"right":"left"].style[ae?"right":"left"]=E+"px",A[ae?"left":"right"].style[ae?"left":"right"]=e-E-F+"px",E+=F}function C(){for(var E=i;(E=E.parentNode)!=document.body&&E!=null;)(E==u||E.scrollWidth!=E.clientWidth||E.scrollHeight!=E.clientHeight)&&l.bindAncestorScroll(E)}function y(){for(var E=l.getColumns(),F=E.length,A=0;F--;)A+=E[F].width;return l.getOptions().fullWidthRows?Math.max(A,l.getAvailableWidth()):A}function w(){t=0;for(var E=l.getScrollDims().width,F=l.getColumns(),A=0,W=F.length;A<W;A++)t+=F[A].width;t+=E,t=Math.max(t,l.getViewportInfo().width)+1e3,o.style.width=t+"px"}let S=()=>{l=null};function M(){return i}function R(){return[i]}function T(){return e}function _(){return[o]}function H(E){return o.children.item(E)}function O(){return[s]}function D(E){return s.childNodes.item(E)}function B(){return s}function q(E){return n.childNodes.item(E)}function Z(){return n}function U(){return o}function J(){return[n]}function ee(E){return l.getRowFromNode(E.parentElement)}function te(){return h}function de(){return[h]}function ie(){return u}function Q(){return[u]}function Y(){o.parentElement.scrollLeft=l.getScrollLeft(),h.parentElement.scrollLeft=l.getScrollLeft(),s.parentElement.scrollLeft=l.getScrollLeft(),n.parentElement.scrollLeft=l.getScrollLeft()}function N(){}function K(){i.style.height=l.getViewportInfo().realScrollHeight+"px"}function je(E){return E}function fe(){return!1}function b(){var E=l.getOptions().alwaysShowVerticalScroll;u.style.overflowX="auto",u.style.overflowY=E?"scroll":l.getOptions().autoHeight?"hidden":"auto"}function Qe(){var E=e;e=y();var F=l.getScrollDims().width;let A=l.getViewportInfo();var W=e+"px";i.style.width=W,s.style.width=W,n.style.width=W,w(),A.hasHScroll=e>l.getViewportInfo().width-F;var oe=e+(A.hasVScroll?F:0)+"px";return r.style.width=oe,a.style.width=oe,e!=E}let Ke=()=>{var E=l.getViewportInfo(),F=E.height+E.topPanelHeight+E.headerRowHeight+E.footerRowHeight;l.getOptions().autoHeight?(l.getContainerNode().style.height=F+E.groupingPanelHeight+k(getComputedStyle(o.parentElement).height)+"px",u.style.height=""):u.style.height=E.height+"px"};function be(){return 0}var Xe={afterHeaderColumnDrag:N,afterRenderRows:N,afterSetOptions:N,appendCachedRow:c,applyColumnWidths:m,beforeCleanupAndRenderCells:N,bindAncestorScrollEvents:C,calcCanvasWidth:y,updateHeadersWidth:w,isFrozenRow:fe,destroy:S,getCanvasNodeFor:M,getCanvasNodes:R,getCanvasWidth:T,getFooterRowCols:J,getFooterRowColsFor:Z,getFooterRowColumn:q,getHeaderCols:_,getHeaderColsFor:U,getHeaderColumn:H,getHeaderRowCols:O,getHeaderRowColsFor:B,getHeaderRowColumn:D,getRowFromCellNode:ee,getFrozenCols:be,getFrozenRowOffset:be,getFrozenRows:be,getScrollCanvasY:M,getScrollContainerX:ie,getScrollContainerY:ie,getTopPanelFor:te,getTopPanelNodes:de,getViewportNodeFor:ie,getViewportNodes:Q,handleScrollH:Y,handleScrollV:N,init:v,layoutName:"basic",realScrollHeightChange:K,reorderViewColumns:je,resizeCanvas:Ke,setOverflow:b,setPaneVisibility:N,setScroller:N,updateCanvasWidth:Qe};return Xe};var Me=class{constructor(e){this.host=e}findFirstFocusableCell(e){for(var t=0,i=this.host.getColumnCount();t<i;){if(this.host.canCellBeActive(e,t))return t;t+=this.host.getColspan(e,t)}return null}findLastFocusableCell(e){for(var t=0,i=null,o=this.host.getColumnCount();t<o;)this.host.canCellBeActive(e,t)&&(i=t),t+=this.host.getColspan(e,t);return i}gotoRight(e,t){var i=this.host.getColumnCount();if(t>=i)return null;do t+=this.host.getColspan(e,t);while(t<i&&!this.host.canCellBeActive(e,t));return t<i?{row:e,cell:t,posX:t}:null}gotoLeft(e,t){if(t<=0)return null;var i=this.findFirstFocusableCell(e);if(i===null||i>=t)return null;for(var o={row:e,cell:i,posX:i},s;;){if(s=this.gotoRight(o.row,o.cell),!s)return null;if(s.cell>=t)return o;o=s}}gotoDown(e,t,i){for(var o,s=this.host.getRowCount();;){if(++e>=s)return null;for(o=t=0;t<=i;)o=t,t+=this.host.getColspan(e,t);if(this.host.canCellBeActive(e,o))return{row:e,cell:o,posX:i}}}gotoUp(e,t,i){for(var o;;){if(--e<0)return null;for(o=t=0;t<=i;)o=t,t+=this.host.getColspan(e,t);if(this.host.canCellBeActive(e,o))return{row:e,cell:o,posX:i}}}gotoNext(e,t,i){if(e==null&&t==null&&(e=t=i=0,this.host.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};var o=this.gotoRight(e,t);if(o)return o;for(var s=null,r=this.host.getRowCount();++e<r;)if(s=this.findFirstFocusableCell(e),s!=null)return{row:e,cell:s,posX:s};return null}gotoPrev(e,t,i){var o=this.host.getColumnCount();if(e==null&&t==null&&(e=this.host.getRowCount()-1,t=i=o-1,this.host.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};for(var s,r;!s&&(s=this.gotoLeft(e,t),!s);){if(--e<0)return null;t=0,r=this.findLastFocusableCell(e),r!=null&&(s={row:e,cell:r,posX:r})}return s}gotoRowStart(e){var t=this.findFirstFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}gotoRowEnd(e){var t=this.findLastFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}navigate(e,t,i,o){var s={up:-1,down:1,prev:-1,next:1,home:-1,end:1};let r=this.host.isRTL();s[r?"right":"left"]=-1,s[r?"left":"right"]=1,this.host.setTabbingDirection(s[e]);var n={up:this.gotoUp,down:this.gotoDown,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd};n[r?"right":"left"]=this.gotoLeft,n[r?"left":"right"]=this.gotoRight;var a=n[e].bind(this);return a(t,i,o)}};function ci(){var l,e,t,i;return{left:(e=(l=window.scrollX)!=null?l:document.documentElement.scrollLeft)!=null?e:0,top:(i=(t=window.scrollY)!=null?t:document.documentElement.scrollTop)!=null?i:0}}function ft(l){let{containerElement:e}=l,{onDragInit:t,onDragStart:i,onDrag:o,onDragEnd:s,preventDragFromKeys:r}=l,n,a,h,u,v,c;e||(e=document.body);let m={dragSource:e,dragHandle:null};function C(){e&&(e.addEventListener("mousedown",M),e.addEventListener("touchstart",M,{passive:!0}))}function y(_,H,O){if(typeof _=="function")return _(H,O)}function w(){e&&(e.removeEventListener("mousedown",M),e.removeEventListener("touchstart",M))}function S(_){let H=!1;return r&&r.forEach(O=>{_[O]&&(H=!0)}),H}function M(_){var H,O;if(!S(_)){n=_.target;let D=(O=(H=_==null?void 0:_.touches)==null?void 0:H[0])!=null?O:_,{target:B}=D;if(!l.allowDragFrom||l.allowDragFrom&&n.matches(l.allowDragFrom)||l.allowDragFromClosest&&n.closest(l.allowDragFromClosest)){m.dragHandle=n;let q=ci();a=q.left+D.clientX,h=q.top+D.clientY,u=D.clientX-D.clientX,v=D.clientY-D.clientY,m=Object.assign(m,{deltaX:u,deltaY:v,startX:a,startY:h,target:B}),y(t,_,m)!==!1&&(document.body.addEventListener("mousemove",R),document.body.addEventListener("touchmove",R,{passive:!0}),document.body.addEventListener("mouseup",T),document.body.addEventListener("touchend",T,{passive:!0}),document.body.addEventListener("touchcancel",T,{passive:!0}))}}}function R(_){var H,O;if(!S(_)){let D=(O=(H=_==null?void 0:_.touches)==null?void 0:H[0])!=null?O:_;u=D.clientX-a,v=D.clientY-h;let{target:B}=D;c||(m=Object.assign(m,{deltaX:u,deltaY:v,startX:a,startY:h,target:B}),y(i,_,m),c=!0),m=Object.assign(m,{deltaX:u,deltaY:v,startX:a,startY:h,target:B}),y(o,_,m)}}function T(_){if(document.body.removeEventListener("mousemove",R),document.body.removeEventListener("touchmove",R),document.body.removeEventListener("mouseup",T),document.body.removeEventListener("touchend",T),document.body.removeEventListener("touchcancel",T),c){let{target:H}=_;m=Object.assign(m,{target:H}),y(s,_,m),c=!1}}return C(),{destroy:w}}var qe,Ze;function Pe(l){var e={top:l.offsetTop,left:l.offsetLeft,bottom:0,right:0,width:l.offsetWidth,height:l.offsetHeight,visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var t=l.offsetParent;(l=l.parentNode)!=document.body&&l!=null;)e.visible&&l.scrollHeight!=l.offsetHeight&&getComputedStyle(l).overflowY!=="visible"&&(e.visible=e.bottom>l.scrollTop&&e.top<l.scrollTop+l.clientHeight),e.visible&&l.scrollWidth!=l.offsetWidth&&getComputedStyle(l).overflowX!="visible"&&(e.visible=e.right>l.scrollLeft&&e.left<l.scrollLeft+l.clientWidth),e.left-=l.scrollLeft,e.top-=l.scrollTop,l===t&&(e.left+=l.offsetLeft,e.top+=l.offsetTop,t=l.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function Ct(l,e,t){var i,o,s=[],r=0,n=0,a;for(i=0;i<l.length;i++)o=l[i],s.push(o.width),n+=o.width,o.resizable&&(r+=o.width-Math.max(o.minWidth,t));for(a=n;n>e&&r;){var h=(n-e)/r;for(i=0;i<l.length&&n>e;i++){o=l[i];var u=s[i];if(!(!o.resizable||u<=o.minWidth||u<=t)){var v=Math.max(o.minWidth,t),c=Math.floor(h*(u-v))||1;c=Math.min(c,u-v),n-=c,r-=c,s[i]-=c}}if(a<=n)break;a=n}for(a=n;n<e;){var m=e/n;for(i=0;i<l.length&&n<e;i++){o=l[i];var C=s[i],y;!o.resizable||o.maxWidth<=C?y=0:y=Math.min(Math.floor(m*C)-C,o.maxWidth-C||1e6)||1,n+=y,s[i]+=n<=e?y:0}if(a>=n)break;a=n}var w=!1;for(i=0;i<l.length;i++)l[i].rerenderOnResize&&l[i].width!=s[i]&&(w=!0),l[i].width=s[i];return w}function Je(l){return!l&&qe!=null?qe:qe=navigator.userAgent.toLowerCase().match(/gecko\//)?4e6:32e6}function et(l){if(!Ze||l){var e=document.body.appendChild(p("div",{style:"position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow: scroll;border:0"}));Ze={width:Math.round(e.offsetWidth-e.clientWidth),height:Math.round(e.offsetWidth-e.clientHeight)},e.remove()}return Ze}function _t(l,e){if(!Array.isArray(l)||!Array.isArray(e)||l.length!==e.length)return!1;l=l.slice().sort(),e=e.slice().sort();for(var t=0;t<l.length;t++)if(l[t]!==e[t])return!1;return!0}function tt(l,e){if(e.length==0)return l;for(var t={},i={},o=[],s=0;s<e.length;s++)t[e[s]]=s;for(s=0;s<l.length;s++)i[l[s].id]=s;function r(h){for(var u=h;u<l.length;u++){var v=l[u];if(h!=u&&t[v.id]!=null)break;o.push(v),i[v.id]=null}}t[l[0].id]==null&&r(0);for(var n of e)s=i[n],s!=null&&r(s);for(s=0;s<l.length;s++){var a=l[s];i[a.id]!=null&&(o.push(a),i[a.id]=null)}return o}function yt(l,e,t,i,o){var s=null,r=null,n,a;if(i)for(s=0,r=0,n=e+1;n<l.length;n++)a=l[n],a.resizable&&(r!=null&&(a.maxWidth?r+=a.maxWidth-a.previousWidth:r=null),s+=a.previousWidth-Math.max(a.minWidth||0,o));var h=0,u=0;for(n=0;n<=e;n++)a=l[n],a.resizable&&(u!=null&&(a.maxWidth?u+=a.maxWidth-a.previousWidth:u=null),h+=a.previousWidth-Math.max(a.minWidth||0,o));return s===null&&(s=1e5),h===null&&(h=1e5),r===null&&(r=1e5),u===null&&(u=1e5),{maxPageX:t+Math.min(s,u),minPageX:t-Math.min(h,r)}}function wt(l,e,t,i,o){var s,r,n,a;if(t<0){for(n=t,r=e;r>=0;r--)s=l[r],s.resizable&&(a=Math.max(s.minWidth||0,o),n&&s.previousWidth+n<a?(n+=s.previousWidth-a,s.width=a):(s.width=s.previousWidth+n,n=0));if(i)for(n=-t,r=e+1;r<l.length;r++)s=l[r],s.resizable&&(n&&s.maxWidth&&s.maxWidth-s.previousWidth<n?(n-=s.maxWidth-s.previousWidth,s.width=s.maxWidth):(s.width=s.previousWidth+n,n=0))}else{for(n=t,r=e;r>=0;r--)s=l[r],s.resizable&&(n&&s.maxWidth&&s.maxWidth-s.previousWidth<n?(n-=s.maxWidth-s.previousWidth,s.width=s.maxWidth):(s.width=s.previousWidth+n,n=0));if(i)for(n=-t,r=e+1;r<l.length;r++)s=l[r],s.resizable&&(a=Math.max(s.minWidth||0,o),n&&s.previousWidth+n<a?(n+=s.previousWidth-a,s.width=a):(s.width=s.previousWidth+n,n=0))}}function it(){this==null||this.classList.add("ui-state-hover")}function ot(){this==null||this.classList.remove("ui-state-hover")}function _e(l){if(!l)return 0;var e=getComputedStyle(l);if(e.boxSizing==="border-box")return 0;var t=["border-top-width","border-bottom-width","padding-top","padding-bottom"],i=0;for(var o of t)i+=k(e.getPropertyValue(o))||0;return i}function bt(l){var s;var e=getComputedStyle(l),t=(s=k(e.width))!=null?s:0;if(e.boxSizing!="border-box")return Math.max(0,t);var i=["border-left-width","border-right-width","padding-left","padding-right"];for(var o of i)t-=k(e.getPropertyValue(o))||0;return Math.max(t,0)}var Et=class l{constructor(e,t,i,o){this._cellCssClasses={};this._cellHeightDiff=0;this._cellWidthDiff=0;this._colLeft=[];this._colRight=[];this._headerColumnWidthDiff=0;this._ignoreScrollUntil=0;this._page=0;this._pageOffset=0;this._pagingActive=!1;this._pagingIsLastPage=!1;this._plugins=[];this._postProcessCleanupQueue=[];this._postProcessedRows={};this._postProcessGroupId=0;this._rowsCache={};this._scrollLeft=0;this._scrollLeftPrev=0;this._scrollLeftRendered=0;this._scrollTop=0;this._scrollTopPrev=0;this._scrollTopRendered=0;this._selectedRows=[];this._sortColumns=[];this._tabbingDirection=1;this._uid="sleekgrid_"+Math.round(1e6*Math.random());this._viewportInfo={};this._vScrollDir=1;this._boundAncestorScroll=[];this.onActiveCellChanged=new L;this.onActiveCellPositionChanged=new L;this.onAddNewRow=new L;this.onBeforeCellEditorDestroy=new L;this.onBeforeDestroy=new L;this.onBeforeEditCell=new L;this.onBeforeFooterRowCellDestroy=new L;this.onBeforeHeaderCellDestroy=new L;this.onBeforeHeaderRowCellDestroy=new L;this.onCellChange=new L;this.onCellCssStylesChanged=new L;this.onClick=new L;this.onColumnsReordered=new L;this.onColumnsResized=new L;this.onCompositeEditorChange=new L;this.onContextMenu=new L;this.onDblClick=new L;this.onDrag=new L;this.onDragEnd=new L;this.onDragInit=new L;this.onDragStart=new L;this.onFooterRowCellRendered=new L;this.onHeaderCellRendered=new L;this.onHeaderClick=new L;this.onHeaderContextMenu=new L;this.onHeaderMouseEnter=new L;this.onHeaderMouseLeave=new L;this.onHeaderRowCellRendered=new L;this.onKeyDown=new L;this.onMouseEnter=new L;this.onMouseLeave=new L;this.onScroll=new L;this.onSelectedRowsChanged=new L;this.onSort=new L;this.onValidationError=new L;this.onViewportChanged=new L;this.handleSelectedRangesChanged=(e,t)=>{var i=this._selectedRows.slice(0);this._selectedRows=[];for(var o={},s=this._cols,r=0;r<t.length;r++)for(var n=t[r].fromRow;n<=t[r].toRow;n++){o[n]||(this._selectedRows.push(n),o[n]={});for(var a=t[r].fromCell;a<=t[r].toCell;a++)this.canCellBeSelected(n,a)&&(o[n][s[a].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass,o),!_t(i,this._selectedRows)){var h=e&&e.detail&&e.detail.caller||"click",u=this._selectedRows.filter(c=>i.indexOf(c)<0),v=i.filter(c=>this._selectedRows.indexOf(c)<0);this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:i,caller:h,changedSelectedRows:u,changedUnselectedRows:v},e)}this._selectedRows=[],o={},s=this._cols;for(var r=0;r<t.length;r++)for(var n=t[r].fromRow;n<=t[r].toRow;n++){o[n]||(this._selectedRows.push(n),o[n]={});for(var a=t[r].fromCell;a<=t[r].toCell;a++)this.canCellBeSelected(n,a)&&(o[n][s[a].id]=this._options.selectedCellCssClass)}};this.viewOnRowCountChanged=()=>{this.updateRowCount(),this.render()};this.viewOnRowsChanged=(e,t)=>{this.invalidateRows(t.rows),this.render(),this.updateGrandTotals()};this.viewOnDataChanged=()=>{this.invalidate(),this.render()};this.resizeCanvas=()=>{this._initialized&&(this.calcViewportSize(),this._layout.resizeCanvas(),(!this._scrollDims||!this._scrollDims.width)&&(this._scrollDims=et(!0)),this._options.forceFitColumns&&this.autosizeColumns(),this.updateRowCount(),this.handleScroll(),this._scrollLeftRendered=-1,this.render())};this.render=()=>{if(this._initialized){var e=this.getVisibleRange(),t=this.getRenderedRange();this.cleanupRows(t),this._scrollLeftRendered!=this._scrollLeft&&(this._layout.beforeCleanupAndRenderCells(t),this.cleanUpAndRenderCells(t)),this.renderRows(t),this._layout.afterRenderRows(t),this._postProcessFromRow=e.top,this._postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this._scrollTopRendered=this._scrollTop,this._scrollLeftRendered=this._scrollLeft,this._lastRenderTime=new Date().getTime(),this._hRender=null}};this.handleHeaderRowScroll=e=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=e.target.scrollLeft;t!=this._layout.getScrollContainerX().scrollLeft&&(this._layout.getScrollContainerX().scrollLeft=t)}};this.handleFooterRowScroll=e=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=e.target.scrollLeft;t!=this._layout.getScrollContainerX().scrollLeft&&(this._layout.getScrollContainerX().scrollLeft=t)}};this.asyncPostProcessRows=()=>{for(var e=this.getDataLength(),t=this._cols;this._postProcessFromRow<=this._postProcessToRow;){var i=this._vScrollDir>=0?this._postProcessFromRow++:this._postProcessToRow--,o=this._rowsCache[i];if(!(!o||i>=e)){this._postProcessedRows[i]||(this._postProcessedRows[i]={}),this.ensureCellNodesInRowsCache(i);for(var s in o.cellNodesByColumnIdx){var r=parseInt(s,10),n=t[r],a=this._postProcessedRows[i][r];if(a!=="R"){if(n.asyncPostRender||n.asyncPostRenderCleanup){var h=o.cellNodesByColumnIdx[r];h&&n.asyncPostRender&&n.asyncPostRender(h,i,this.getDataItem(i),n,a==="C")}this._postProcessedRows[i][r]="R"}}if(this._options.asyncPostRenderDelay>=0){this._hPostRender=setTimeout(this.asyncPostProcessRows,this._options.asyncPostRenderDelay);return}}}};this.handleActiveCellPositionChange=()=>{if(this._activeCellNode&&(this.trigger(this.onActiveCellPositionChanged,{}),this._currentEditor)){var e=this.getActiveCellPosition();this._currentEditor.show&&this._currentEditor.hide&&(e.visible?this._currentEditor.show():this._currentEditor.hide()),this._currentEditor.position&&this._currentEditor.position(e)}};var s,r,n,a;if(this._data=t,this._colDefaults=Object.assign({},at),this._options=o=Object.assign({},vt,o),o.jQuery=this._jQuery=o.jQuery===void 0?typeof jQuery!="undefined"?jQuery:void 0:o.jQuery,o.sanitizer=o.sanitizer===void 0?typeof DOMPurify!="undefined"&&typeof DOMPurify.sanitize=="function"?DOMPurify.sanitize:gt:o.sanitizer,this._jQuery&&e instanceof this._jQuery?this._container=e[0]:e instanceof Element?this._container=e:typeof e=="string"?this._container=document.querySelector(e):e.length&&(e=e[0]),this._container==null)throw new Error("SleekGrid requires a valid container, "+e+" does not exist in the DOM.");this._container.classList.add("slick-container"),this._emptyNode=(s=o.emptyNode)!=null?s:this._jQuery?function(h){this(h).empty()}.bind(this._jQuery):function(h){h.innerHTML=""},this._removeNode=(r=o.removeNode)!=null?r:this._jQuery?function(h){this(h).remove()}.bind(this._jQuery):function(h){h.remove()},o!=null&&o.createPreHeaderPanel&&(o.groupingPanel==null&&(o.groupingPanel=!0),o.groupingPanelHeight==null&&o.preHeaderPanelHeight!=null&&(o.groupingPanelHeight=o.preHeaderPanelHeight),o.showGroupingPanel==null&&o.showPreHeaderPanel!=null&&(o.showGroupingPanel=o.showPreHeaderPanel)),this._options.rtl=(n=this._options.rtl)!=null?n:document.body.classList.contains("rtl")||typeof getComputedStyle!="undefined"&&getComputedStyle(this._container).direction=="rtl",this._options.rtl?this._container.classList.add("rtl"):this._container.classList.add("ltr"),this.validateAndEnforceOptions(),this._colDefaults.width=o.defaultColumnWidth,this._editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},this._jQuery?this._jQuery(this._container).empty():this._container.innerHTML="",this._container.style.overflow="hidden",this._container.style.outline="0",this._container.classList.add(this._uid),this._options.useLegacyUI&&this._container.classList.add("ui-widget"),/relative|absolute|fixed/.test(getComputedStyle(this._container).position)||(this._container.style.position="relative"),this._container.appendChild(this._focusSink1=p("div",{class:"slick-focus-sink",hideFocus:"",style:"position:fixed;width:0!important;height:0!important;top:0;left:0;outline:0!important;",tabIndex:"0"})),this._layout=(a=o.layoutEngine)!=null?a:new $e,this.setInitialCols(i),this._scrollDims=et(),o.groupingPanel&&this.createGroupingPanel(),this._layout.init({cleanUpAndRenderCells:this.cleanUpAndRenderCells.bind(this),bindAncestorScroll:this.bindAncestorScroll.bind(this),getAvailableWidth:this.getAvailableWidth.bind(this),getCellFromPoint:this.getCellFromPoint.bind(this),getColumnCssRules:this.getColumnCssRules.bind(this),getColumns:this.getColumns.bind(this),getContainerNode:this.getContainerNode.bind(this),getDataLength:this.getDataLength.bind(this),getOptions:this.getOptions.bind(this),getRowFromNode:this.getRowFromNode.bind(this),getScrollDims:this.getScrollBarDimensions.bind(this),getScrollLeft:()=>this._scrollLeft,getScrollTop:()=>this._scrollTop,getViewportInfo:()=>this._viewportInfo,renderRows:this.renderRows.bind(this)}),this._container.append(this._focusSink2=this._focusSink1.cloneNode()),o.viewportClass&&this.getViewports().forEach(h=>ne(h,o.viewportClass)),o.explicitInitialization||this.init(),this.bindToData()}createGroupingPanel(){this._groupingPanel||!this._focusSink1||(this._focusSink1.insertAdjacentElement("afterend",this._groupingPanel=p("div",{class:"slick-grouping-panel",style:this._options.showGroupingPanel?null:"display: none"})),this._options.createPreHeaderPanel&&this._groupingPanel.appendChild(p("div",{class:"slick-preheader-panel"})))}bindAncestorScroll(e){this._jQuery?this._jQuery(e).on("scroll",this.handleActiveCellPositionChange):e.addEventListener("scroll",this.handleActiveCellPositionChange),this._boundAncestorScroll.push(e)}init(){if(this._initialized)return;this._initialized=!0,this.calcViewportSize(),this.measureCellPaddingAndBorder();var e=this.getViewports();this._jQuery&&!this._options.enableTextSelectionOnCells&&this._jQuery(e).on("selectstart.ui",()=>this._jQuery(this).is("input,textarea")),this._layout.setPaneVisibility(),this._layout.setScroller(),this.setOverflow(),this.updateViewColLeftRight(),this.createColumnHeaders(),this.createColumnFooters(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this._layout.bindAncestorScrollEvents();let t=(o,s,r)=>{this._jQuery?this._jQuery(o).on(s,r):o.addEventListener(s,r)};t(this._container,"resize",this.resizeCanvas),e.forEach(o=>{var s=!1;t(o,"scroll",r=>{s||(s=!0,window.requestAnimationFrame(()=>{this.handleScroll(),s=!1}))})}),this._jQuery&&this._jQuery.fn.mousewheel&&(this.hasFrozenColumns()||this.hasFrozenRows())&&this._jQuery(e).on("mousewheel",this.handleMouseWheel.bind(this)),this._layout.getHeaderCols().forEach(o=>{He(o),t(o,"contextmenu",this.handleHeaderContextMenu.bind(this)),t(o,"click",this.handleHeaderClick.bind(this)),this._jQuery?this._jQuery(o).on("mouseenter",".slick-header-column",this.handleHeaderMouseEnter.bind(this)).on("mouseleave",".slick-header-column",this.handleHeaderMouseLeave.bind(this)):(o.addEventListener("mouseenter",s=>s.target.closest(".slick-header-column")&&this.handleHeaderMouseEnter(s)),o.addEventListener("mouseleave",s=>s.target.closest(".slick-header-column")&&this.handleHeaderMouseLeave(s)))}),this._layout.getHeaderRowCols().forEach(o=>{t(o.parentElement,"scroll",this.handleHeaderRowScroll)}),this._layout.getFooterRowCols().forEach(o=>{t(o.parentElement,"scroll",this.handleFooterRowScroll)}),[this._focusSink1,this._focusSink2].forEach(o=>t(o,"keydown",this.handleKeyDown.bind(this)));var i=Array.from(this.getCanvases());i.forEach(o=>{t(o,"keydown",this.handleKeyDown.bind(this)),t(o,"click",this.handleClick.bind(this)),t(o,"dblclick",this.handleDblClick.bind(this)),t(o,"contextmenu",this.handleContextMenu.bind(this))}),this._jQuery&&this._jQuery.fn.drag?this._jQuery(i).on("draginit",this.handleDragInit.bind(this)).on("dragstart",{distance:3},this.handleDragStart.bind(this)).on("drag",this.handleDrag.bind(this)).on("dragend",this.handleDragEnd.bind(this)):this._draggableInstance=ft({containerElement:this._container,preventDragFromKeys:["ctrlKey","metaKey"],onDragInit:this.handleDragInit.bind(this),onDragStart:this.handleDragStart.bind(this),onDrag:this.handleDrag.bind(this),onDragEnd:this.handleDragEnd.bind(this)}),i.forEach(o=>{this._jQuery?this._jQuery(o).on("mouseenter",".slick-cell",this.handleMouseEnter.bind(this)).on("mouseleave",".slick-cell",this.handleMouseLeave.bind(this)):(o.addEventListener("mouseenter",s=>s.target.closest(".slick-cell")&&this.handleMouseEnter(s)),o.addEventListener("mouseleave",s=>s.target.closest(".slick-cell")&&this.handleMouseLeave(s)))}),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&this._jQuery&&this._jQuery(i).on("mousewheel",this.handleMouseWheel.bind(this))}hasFrozenColumns(){return this._layout.getFrozenCols()>0}hasFrozenRows(){return this._layout.getFrozenRows()>0}registerPlugin(e){this._plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(var t=this._plugins.length;t>=0;t--)if(this._plugins[t]===e){this._plugins[t].destroy&&this._plugins[t].destroy(),this._plugins.splice(t,1);break}}getPluginByName(e){for(var t=this._plugins.length-1;t>=0;t--)if(this._plugins[t].pluginName===e)return this._plugins[t]}setSelectionModel(e){this.unregisterSelectionModel(),this._selectionModel=e,this._selectionModel&&(this._selectionModel.init(this),this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged))}unregisterSelectionModel(){var e,t;this._selectionModel&&(this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged),(t=(e=this._selectionModel).destroy)==null||t.call(e))}getScrollBarDimensions(){return this._scrollDims}getDisplayedScrollbarDimensions(){return{width:this._viewportInfo.hasVScroll?this._scrollDims.width:0,height:this._viewportInfo.hasHScroll?this._scrollDims.height:0}}getAbsoluteColumnMinWidth(){return this._absoluteColMinWidth}getSelectionModel(){return this._selectionModel}colIdOrIdxToCell(e){return e==null?null:typeof e!="number"?this.getColumnIndex(e):e}getCanvasNode(e,t){return this._layout.getCanvasNodeFor(this.colIdOrIdxToCell(e||0),t||0)}getCanvases(){var e=this._layout.getCanvasNodes();return this._jQuery?this._jQuery(e):e}getActiveCanvasNode(e){return e&&(this._activeCanvasNode=e.target.closest(".grid-canvas")),this._activeCanvasNode}getViewportNode(e,t){return this._layout.getViewportNodeFor(this.colIdOrIdxToCell(e||0),t||0)}getViewports(){return this._layout.getViewportNodes()}getActiveViewportNode(e){return e&&(this._activeViewportNode=e.target.closest(".slick-viewport")),this._activeViewportNode}getAvailableWidth(){return this._viewportInfo.hasVScroll?this._viewportInfo.width-this._scrollDims.width:this._viewportInfo.width}updateCanvasWidth(e){(this._layout.updateCanvasWidth()||e)&&this._layout.applyColumnWidths()}unbindAncestorScrollEvents(){if(this._boundAncestorScroll)for(var e of this._boundAncestorScroll)e.removeEventListener("scroll",this.handleActiveCellPositionChange);this._boundAncestorScroll=[]}updateColumnHeader(e,t,i){if(this._initialized){var o=this.getColumnIndex(e);if(o!=null){var s=this._cols[o],r=this._layout.getHeaderColumn(o);if(r){if(t!==void 0&&(s.name=t),i!==void 0&&(s.toolTip=i),this.trigger(this.onBeforeHeaderCellDestroy,{node:r,column:s}),i!==void 0&&(r.title=i||""),t!==void 0){var n=r.firstElementChild;s.nameIsHtml?n&&(n.innerHTML=t!=null?t:""):n&&(n.textContent=t!=null?t:"")}this.trigger(this.onHeaderCellRendered,{node:r,column:s})}}}}getHeader(){return this._layout.getHeaderCols()[0]}getHeaderColumn(e){var t=this.colIdOrIdxToCell(e);return t==null?null:this._layout.getHeaderColumn(t)}getGroupingPanel(){return this._groupingPanel}getPreHeaderPanel(){var e;return(e=this._groupingPanel)==null?void 0:e.querySelector(".slick-preheader-panel")}getHeaderRow(){return this._layout.getHeaderRowCols()[0]}getHeaderRowColumn(e){var t=this.colIdOrIdxToCell(e);if(t!=null)return this._layout.getHeaderRowColumn(t)}getFooterRow(){return this._layout.getFooterRowCols()[0]}getFooterRowColumn(e){var t=this.colIdOrIdxToCell(e);return t==null?null:this._layout.getFooterRowColumn(t)}createColumnFooters(){var e=this._layout.getFooterRowCols();e.forEach(r=>{r.querySelectorAll(".slick-footerrow-column").forEach(n=>{var a=this.getColumnFromNode(n);a&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:n,column:a})}),this._jQuery?this._jQuery(r).empty():r.innerHTML=""});for(var t=this._cols,i=0;i<t.length;i++){var o=t[i],s=p("div",{class:"slick-footerrow-column l"+i+" r"+i+(this._options.useLegacyUI?" ui-state-default":"")});s.dataset.c=i.toString(),this._jQuery&&this._jQuery(s).data("column",o),o.footerCssClass?ne(s,o.footerCssClass):o.cssClass&&ne(s,o.cssClass),this._layout.getFooterRowColsFor(i).appendChild(s),this.trigger(this.onFooterRowCellRendered,{node:s,column:o})}}createColumnHeaders(){var c,m;this._layout.getHeaderCols().forEach(C=>{C.querySelectorAll(".slick-header-column").forEach(y=>{var w=this.getColumnFromNode(y);w&&this.trigger(this.onBeforeHeaderCellDestroy,{node:y,column:w})}),this._emptyNode(C)}),this._layout.updateHeadersWidth(),this._layout.getHeaderRowCols().forEach(C=>{C.querySelectorAll(".slick-headerrow-column").forEach(y=>{var w=this.getColumnFromNode(y);w&&this.trigger(this.onBeforeHeaderRowCellDestroy,{node:y,column:w,grid:this})}),this._jQuery?this._jQuery(C).empty():C.innerHTML=""});for(var i=this._cols,o=this._layout.getFrozenCols(),s=0;s<i.length;s++){var r=i[s],n=this._layout.getHeaderColsFor(s),a=document.createElement("span");a.className="slick-column-name",r.nameIsHtml?a.innerHTML=(c=r.name)!=null?c:"":a.textContent=(m=r.name)!=null?m:"";var h=p("div",{class:"slick-header-column"+(this._options.useLegacyUI?" ui-state-default ":""),"data-id":r.id,id:""+this._uid+r.id,title:r.toolTip||"",style:"width: "+(r.width-this._headerColumnWidthDiff)+"px"},a);if(h.dataset.c=s.toString(),this._jQuery&&this._jQuery(h).data("column",r),r.headerCssClass&&ne(h,r.headerCssClass),s<o&&h.classList.add("frozen"),n.appendChild(h),(this._options.enableColumnReorder||r.sortable)&&this._options.useLegacyUI&&(this._jQuery?(this._jQuery(h).on("mouseenter",it),this._jQuery(h).on("mouseleave",ot)):(h.addEventListener("mouseenter",it),h.addEventListener("mouseleave",ot))),r.sortable&&(h.classList.add("slick-header-sortable"),h.appendChild(p("span",{class:"slick-sort-indicator"}))),this.trigger(this.onHeaderCellRendered,{node:h,column:r}),this._options.showHeaderRow){var u=this._layout.getHeaderRowColsFor(s),v=p("div",{class:"slick-headerrow-column l"+s+" r"+s+(this._options.useLegacyUI?" ui-state-default":"")});v.dataset.c=s.toString(),this._jQuery&&this._jQuery(v).data("column",r),u.appendChild(v),this.trigger(this.onHeaderRowCellRendered,{node:v,column:r})}}this.setSortColumns(this._sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&(this.setupColumnReorder(),this._layout.getHeaderCols().forEach(C=>C.querySelectorAll(".slick-resizable-handle").forEach(y=>y.draggable=!0)))}setupColumnSort(){let e=t=>{var i=t.target;if(!i.classList.contains("slick-resizable-handle")){var o=i.closest(".slick-header-column");if(o){var s=this.getColumnFromNode(o);if(s.sortable){if(!this.getEditorLock().commitCurrentEdit())return;for(var r=null,n=0;n<this._sortColumns.length;n++)if(this._sortColumns[n].columnId==s.id){r=this._sortColumns[n],r.sortAsc=!r.sortAsc;break}if(t.metaKey&&this._options.multiColumnSort?r&&this._sortColumns.splice(n,1):((!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort)&&(this._sortColumns=[]),r?this._sortColumns.length==0&&this._sortColumns.push(r):(r={columnId:s.id,sortAsc:s.defaultSortAsc},this._sortColumns.push(r))),this.setSortColumns(this._sortColumns),!this._options.multiColumnSort)this.trigger(this.onSort,{multiColumnSort:!1,sortCol:s,sortAsc:r.sortAsc},t);else{var a=this._initCols;this.trigger(this.onSort,{multiColumnSort:!0,sortCols:this._sortColumns.map(h=>({sortCol:a[this.getInitialColumnIndex(h.columnId)],sortAsc:h.sortAsc}))},t)}}}}};this._layout.getHeaderCols().forEach(t=>{this._jQuery?this._jQuery(t).on("click",e):t.addEventListener("click",e)})}static offset(e){if(!e||!e.getBoundingClientRect)return;let t=e.getBoundingClientRect(),i=document.documentElement;return{top:t.top+window.scrollY-i.clientTop,left:t.left+window.scrollX-i.clientLeft}}setupColumnReorder(){var r;if(typeof Sortable=="undefined")return;(r=this.sortableColInstances)==null||r.forEach(n=>n.destroy());let e=null,t=()=>this._layout.getScrollContainerX().scrollLeft=this._layout.getScrollContainerX().scrollLeft+10,i=()=>this._layout.getScrollContainerX().scrollLeft=this._layout.getScrollContainerX().scrollLeft-10,o,s={animation:50,direction:"horizontal",chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",filter:".slick-resizable-handle",preventOnFilter:!1,dragoverBubble:!1,revertClone:!0,scroll:!this.hasFrozenColumns(),onStart:n=>{o=!this.hasFrozenColumns()||l.offset(n.item).left>l.offset(this._layout.getScrollContainerX()).left,o&&n.originalEvent&&n.originalEvent.pageX>this._container.clientWidth?e||(e=setInterval(i,100)):o&&n.originalEvent&&n.originalEvent.pageX<l.offset(this._layout.getScrollContainerX()).left?e||(e=setInterval(t,100)):(clearInterval(e),e=null)},onEnd:n=>{var u;if(clearInterval(e),e=null,!!((u=this.getEditorLock())!=null&&u.commitCurrentEdit())){var h;this._layout.getHeaderCols().forEach((v,c)=>{var m,C,y;return h=tt(this._initCols,(y=(C=(m=this.sortableColInstances[c])==null?void 0:m.toArray)==null?void 0:C.call(m))!=null?y:[])}),this.setColumns(h),this.trigger(this.onColumnsReordered,{}),n.stopPropagation(),this.setupColumnResize(),this._activeCellNode&&this.setFocus()}}};this.sortableColInstances=this._layout.getHeaderCols().map(n=>Sortable.create(n,s))}setupColumnResize(){var s,o,r,n=this._cols,e=[];this._layout.getHeaderCols().forEach(v=>{e=e.concat(Array.from(v.children))});var t,i,o,s,r,a,h,n=this._cols,a,h;if(e.forEach((v,c)=>{var m=v.querySelector(".slick-resizable-handle");m&&this._removeNode(m),n[c].resizable&&(a===void 0&&(a=c),h=c)}),a===void 0)return;let u=!this._jQuery||!this._jQuery.fn||!this._jQuery.fn.drag;e.forEach((v,c)=>{if(c<a||this._options.forceFitColumns&&c>=h)return;let m=v.appendChild(document.createElement("div"));m.classList.add("slick-resizable-handle"),m.draggable=!0;var C=null,y=null;let w=R=>{var _;if(!this.getEditorLock().commitCurrentEdit()){!u&&R.preventDefault();return}u&&(C=H=>{y={pageX:H.pageX,pageY:H.pageY},H.preventDefault()},document.addEventListener("dragover",C)),o=R.pageX,(_=R.target.parentElement)==null||_.classList.add("slick-header-column-active"),e.forEach((H,O)=>{n[O].previousWidth=H.offsetWidth});let T=yt(n,c,o,this._options.forceFitColumns,this._absoluteColMinWidth);r=T.maxPageX,s=T.minPageX,u&&(R.dataTransfer.effectAllowed="move")},S=R=>{var T;if(u){var _=!R.pageX&&!R.pageY?y==null?void 0:y.pageX:R.pageX,H=!R.pageX&&!R.pageY?y==null?void 0:y.pageY:R.pageY;if(!_&&!R.clientX&&!H&&!R.clientY)return;T=Math.min(r,Math.max(s,_))-o,R.dataTransfer.effectAllowed="none",R.preventDefault()}else T=Math.min(r,Math.max(s,R.pageX))-o;isNaN(T)||(wt(n,c,T,this._options.forceFitColumns,this._absoluteColMinWidth),this._layout.afterHeaderColumnDrag(),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this._layout.applyColumnWidths())},M=R=>{var _;for(C&&(document.removeEventListener("dragover",C),C=null),(_=R.target.parentElement)==null||_.classList.remove("slick-header-column-active"),t=0;t<e.length;t++){i=n[t];var T=e[t].offsetWidth;i.previousWidth!==T&&i.rerenderOnResize&&this.invalidateAllRows()}this.columnsResized(!1)};u?(m.addEventListener("dragstart",w),m.addEventListener("drag",S),m.addEventListener("dragend",M),m.addEventListener("dragover",R=>{R.preventDefault(),R.dataTransfer.effectAllowed="move"})):this._jQuery(m).on("dragstart",w).on("drag",S).on("dragend",M)})}columnsResized(e=!0){this.applyColumnHeaderWidths(),this._layout.applyColumnWidths(),e&&this.invalidateAllRows(),this.updateCanvasWidth(!0),this.render(),this.trigger(this.onColumnsResized)}setOverflow(){this._layout.setOverflow(),this._options.viewportClass&&this.getViewports().forEach(e=>ne(e,this._options.viewportClass))}measureCellPaddingAndBorder(){let e=["border-left-width","border-right-width","padding-left","padding-right"],t=["border-top-width","border-bottom-width","padding-top","padding-bottom"];var i=this._layout.getHeaderColsFor(0).appendChild(p("div",{class:"slick-header-column"+(this._options.useLegacyUI?" ui-state-default":""),style:"visibility:hidden"}));this._headerColumnWidthDiff=0;var o=getComputedStyle(i);o.boxSizing!="border-box"&&e.forEach(r=>this._headerColumnWidthDiff+=k(o.getPropertyValue(r))||0),i.remove();var s=this._layout.getCanvasNodeFor(0,0).appendChild(p("div",{class:"slick-row"},i=p("div",{class:"slick-cell",id:"",style:"visibility: hidden"})));i.innerHTML="-",this._cellWidthDiff=this._cellHeightDiff=0,o=getComputedStyle(i),o.boxSizing!="border-box"&&(e.forEach(r=>this._cellWidthDiff+=k(o.getPropertyValue(r))||0),t.forEach(r=>this._cellHeightDiff+=k(o.getPropertyValue(r))||0)),s.remove(),this._absoluteColMinWidth=Math.max(this._headerColumnWidthDiff,this._cellWidthDiff)}createCssRules(){var e=this._options.rowHeight-this._cellHeightDiff;if(this._options.useCssVars&&this.getColumns().length>50&&(this._options.useCssVars=!1),this._container.classList.toggle("sleek-vars",!!this._options.useCssVars),this._options.useCssVars){var t=this._container.style;t.setProperty("--sleek-row-height",this._options.rowHeight+"px"),t.setProperty("--sleek-cell-height",e+"px"),t.setProperty("--sleek-top-panel-height",this._options.topPanelHeight+"px"),t.setProperty("--sleek-grouping-panel-height",this._options.groupingPanelHeight+"px"),t.setProperty("--sleek-headerrow-height",this._options.headerRowHeight+"px"),t.setProperty("--sleek-footerrow-height",this._options.footerRowHeight+"px");return}var i=this._styleNode=document.createElement("style");i.dataset.uid=this._uid;for(var o=["."+this._uid+" { --slick-cell-height: "+this._options.rowHeight+"px; }","."+this._uid+" .slick-group-header-column { "+(this._options.rtl?"right":"left")+": 1000px; }","."+this._uid+" .slick-header-column { "+(this._options.rtl?"right":"left")+": 1000px; }","."+this._uid+" .slick-top-panel { height:"+this._options.topPanelHeight+"px; }","."+this._uid+" .slick-grouping-panel { height:"+this._options.groupingPanelHeight+"px; }","."+this._uid+" .slick-headerrow-columns { height:"+this._options.headerRowHeight+"px; }","."+this._uid+" .slick-cell { height:"+e+"px; }","."+this._uid+" .slick-row { height:"+this._options.rowHeight+"px; }","."+this._uid+" .slick-footerrow-columns { height:"+this._options.footerRowHeight+"px; }"],s=this._cols,r=0;r<s.length;r++)o.push("."+this._uid+" .l"+r+" { }"),o.push("."+this._uid+" .r"+r+" { }");i.appendChild(document.createTextNode(o.join(" "))),document.head.appendChild(i)}getColumnCssRules(e){if(this._options.useCssVars)return null;if(!this._stylesheet){var t=document.querySelector("style[data-uid='"+this._uid+"']");if(t&&t.sheet)this._stylesheet=t.sheet;else for(var i=document.styleSheets,o=0;o<i.length;o++)if((i[o].ownerNode||i[o].owningElement)==this._styleNode){this._stylesheet=i[o];break}if(!this._stylesheet)throw new Error("Cannot find stylesheet.");this._columnCssRulesL=[],this._columnCssRulesR=[];for(var s=this._stylesheet.cssRules||this._stylesheet.rules,r,n,o=0;o<s.length;o++){var a=s[o].selectorText;(r=/\.l\d+/.exec(a))?(n=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesL[n]=s[o]):(r=/\.r\d+/.exec(a))&&(n=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesR[n]=s[o])}}return this._options.rtl?{right:this._columnCssRulesL[e],left:this._columnCssRulesR[e]}:{left:this._columnCssRulesL[e],right:this._columnCssRulesR[e]}}removeCssRules(){var e;(e=this._styleNode)==null||e.remove(),this._styleNode=null,this._stylesheet=null}destroy(){var s;this.getEditorLock().cancelCurrentEdit(),this.trigger(this.onBeforeDestroy);for(var e=this._plugins.length;e--;)this.unregisterPlugin(this._plugins[e]);this._draggableInstance&&(this._draggableInstance.destroy(),this._draggableInstance=null),this._options.enableColumnReorder&&this._jQuery&&this._jQuery.fn.sortable&&this._jQuery(this._layout.getHeaderCols()).filter(":ui-sortable").sortable("destroy"),this.unbindAncestorScrollEvents(),this.unbindFromData(),this.unregisterSelectionModel(),(s=this._jQuery)==null||s.call(this,this._container).off(".slickgrid"),this.removeCssRules();var t=this._layout.getCanvasNodes();this._jQuery?this._jQuery(t).off("draginit dragstart dragend drag"):t.forEach(r=>this._removeNode(r));for(var i in this)if(Object.prototype.hasOwnProperty.call(this,i)){if(i.startsWith("on")){var o=this[i];o!=null&&o.clear&&(o!=null&&o.subscribe)&&(o==null||o.clear())}delete this[i]}}trigger(e,t,i){return i=i||new Te,t=t||{},t.grid=this,e.notify(t,i,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this._editController}getColumnById(e){return e?this._cols[this._colById[e]]:null}getColumnIndex(e){return e?this._colById[e]:null}getInitialColumnIndex(e){return e?this._initColById[e]:null}getVisibleColumnById(e){return e?this._cols[this._colById[e]]:null}autosizeColumns(){var e=this._viewportInfo,t=e.hasVScroll?e.width-this._scrollDims.width:e.width,i=Ct(this._cols,t,this._absoluteColMinWidth);this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),i&&(this.invalidateAllRows(),this.render())}applyColumnHeaderWidths(){if(this._initialized){for(var e,t=0,i=this._cols,o=i.length,s=this._headerColumnWidthDiff;t<o;t++)if(e=this._layout.getHeaderColumn(t),e){var r=i[t].width-s;e.offsetWidth!==r&&(e.style.width=r+"px")}this.updateViewColLeftRight()}}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}setSortColumns(e){this._sortColumns=e||[];var t=[];this._layout.getHeaderCols().forEach(i=>t=t.concat(Array.from(i.children))),t.forEach(i=>{i.classList.remove("slick-header-column-sorted");var o=i.querySelector(".slick-sort-indicator");o&&o.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc")}),this._sortColumns.forEach(i=>{i.sortAsc==null&&(i.sortAsc=!0);var o=this.getColumnIndex(i.columnId);if(o!=null){var s=t[o];if(s){s.classList.add("slick-header-column-sorted");var r=s.querySelector(".slick-sort-indicator");r&&r.classList.add(i.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}})}getSortColumns(){return this._sortColumns}getColumns(){return this._cols}getInitialColumns(){return this._initCols}updateViewColLeftRight(){this._colLeft=[],this._colRight=[];for(var e=0,t,i=this._cols,o,s=i.length,r=this._layout.getFrozenCols(),o=0;o<s;o++)r===o&&(e=0),t=e+i[o].width,this._colLeft[o]=e,this._colRight[o]=t,e=t}setInitialCols(e){var n,a;ht(e,this._colDefaults);var t={},i=[],o={},s,r;for(s=0;s<e.length;s++)r=e[s],t[r.id]=s,r.visible!==!1&&i.push(r);for(i=this._layout.reorderViewColumns(i,this._options),this._postRenderActive=(n=this._options.enableAsyncPostRender)!=null?n:!1,this._postCleanupActive=(a=this._options.enableAsyncPostRenderCleanup)!=null?a:!1,s=0;s<i.length;s++)r=i[s],o[r.id]=s,r.asyncPostRenderCleanup!=null&&(this._postCleanupActive=!0),r.asyncPostRender!=null&&(this._postRenderActive=!0);this._initCols=e,this._initColById=t,this._cols=i,this._colById=o}setColumns(e){var t,i;e&&this._initCols&&this._cols&&e.length===this._cols.length&&this._initCols.length>this._cols.length&&!e.some(o=>this._cols.indexOf(o)<0)&&!this._cols.some(o=>e.indexOf(o)<0)&&(tt(this._initCols,e.map(o=>o.id)),e=this._initCols),this.setInitialCols(e),this.updateViewColLeftRight(),this._initialized&&(this._layout.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooters(),this.updateGrandTotals(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this._layout.applyColumnWidths(),this.handleScroll(),(i=(t=this.getSelectionModel())==null?void 0:t.refreshSelections)==null||i.call(t))}getOptions(){return this._options}setOptions(e,t,i,o){var s;this.getEditorLock().commitCurrentEdit()&&(this.makeActiveCellNormal(),e.groupingPanel&&!this._options.groupingPanel?this.createGroupingPanel():e.groupingPanel!=null&&!e.groupingPanel&&this._groupingPanel&&this._removeNode(this._groupingPanel),e.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(e.showColumnHeader),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),this._options=Object.assign(this._options,e),this.validateAndEnforceOptions(),this._layout.afterSetOptions(e),e.columns&&!i&&this.setColumns((s=e.columns)!=null?s:this._initCols),o||this.setOverflow(),this._layout.setScroller(),t||this.render())}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}bindToData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.subscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.subscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.subscribe(this.viewOnDataChanged))}unbindFromData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.unsubscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.unsubscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.unsubscribe(this.viewOnDataChanged))}setData(e,t){this.unbindFromData(),this._data=e,this.bindToData(),this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this._data}getDataLength(){return this._data.getLength?this._data.getLength():this._data.length}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this._pagingActive||this._pagingIsLastPage)?1:0)}getDataItem(e){return this._data.getItem?this._data.getItem(e):this._data[e]}getTopPanel(){return this._layout.getTopPanelFor(0)}setTopPanelVisibility(e){this._options.showTopPanel!=e&&(this._options.showTopPanel=!!e,this._layout.getTopPanelNodes().forEach(t=>{this._jQuery?this._jQuery(t)[e?"slideDown":"slideUp"]("fast",this.resizeCanvas):(t.style.display=e?"":"none",this.resizeCanvas())}))}setColumnHeaderVisibility(e,t){this._options.showColumnHeader!=e&&(this._options.showColumnHeader=e,this._layout.getHeaderCols().forEach(i=>{let o=i.parentElement;t&&this._jQuery?this._jQuery(o)[e?"slideDown":"slideUp"]("fast",this.resizeCanvas):(o.style.display=e?"":"none",this.resizeCanvas())}))}setFooterRowVisibility(e){this._options.showFooterRow!=e&&(this._options.showFooterRow=!!e,this._layout.getFooterRowCols().forEach(t=>{let i=t.parentElement;this._jQuery?this._jQuery(i)[e?"slideDown":"slideUp"]("fast",this.resizeCanvas):(i.style.display=e?"":"none",this.resizeCanvas())}))}setGroupingPanelVisibility(e){if(this._options.showGroupingPanel!=e){if(this._options.showGroupingPanel=e,!this._options.groupingPanel)return;let t=this._groupingPanel;this._jQuery?this._jQuery(t)[e?"slideDown":"slideUp"]("fast",this.resizeCanvas):(t.style.display=e?"":"none",this.resizeCanvas())}}setPreHeaderPanelVisibility(e){this.setGroupingPanelVisibility(e)}setHeaderRowVisibility(e){this._options.showHeaderRow!=e&&(this._options.showHeaderRow=e,this._layout.getHeaderRowCols().forEach(t=>{let i=t.parentElement;this._jQuery?this._jQuery(i)[e?"slideDown":"slideUp"]("fast",this.resizeCanvas):(i.style.display=e?"":"none",this.resizeCanvas())}))}getContainerNode(){return this._container}getUID(){return this._uid}getRowTop(e){return this._options.rowHeight*e-this._pageOffset}getRowFromPosition(e){return Math.floor((e+this._pageOffset)/this._options.rowHeight)}scrollTo(e){let t=this._viewportInfo;e=Math.max(e,0),e=Math.min(e,t.virtualHeight-Math.round(this._layout.getScrollContainerY().clientHeight)+(t.hasHScroll||this.hasFrozenColumns()?this._scrollDims.height:0));var i=this._pageOffset;this._page=Math.min(this._numberOfPages-1,Math.floor(e/this._pageHeight)),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient);var o=e-this._pageOffset;if(this._pageOffset!=i){var s=this.getVisibleRange(o);this.cleanupRows(s),this.updateRowPositions()}this._scrollTopPrev!=o&&(this._vScrollDir=this._scrollTopPrev+i<o+this._pageOffset?1:-1,this._scrollTopRendered=this._scrollTop=this._scrollTopPrev=o,this._layout.handleScrollV(),this._layout.getScrollContainerY().scrollTop=o,this.trigger(this.onViewportChanged))}getFormatter(e,t){var i=this._data;if(i.getItemMetadata){let h=i.getItemMetadata(e);if(h){let u=h.columns;if(u){var o=u[t.id]||u[this.getColumnIndex(t.id)];if(o){if(o.format)return o.format;if(o.formatter)return le(o.formatter)}}if(h.format)return h.format;if(h.formatter)return le(h.formatter)}}if(t.format)return t.format;if(t.formatter)return le(t.formatter);var s=this._options,r=s.formatterFactory;if(r){if(r.getFormat){var n=r.getFormat(t);if(n)return n}else if(r.getFormatter){var a=r.getFormatter(t);if(a)return le(a)}}return s.defaultFormat?s.defaultFormat:s.defaultFormatter?le(s.defaultFormatter):Ie}getFormatterContext(e,t){var i=this._cols[t],o=this.getDataItem(e);let s={cell:t,column:i,grid:this,escape:G,item:o,row:e};return o&&(s.value=this.getDataItemValueForColumn(o,i)),s}getEditor(e,t){var i=this._cols[t],o=this._data.getItemMetadata&&this._data.getItemMetadata(e),s=o&&o.columns;return s&&s[i.id]&&s[i.id].editor!==void 0?s[i.id].editor:s&&s[t]&&s[t].editor!==void 0?s[t].editor:i.editor||this._options.editorFactory&&this._options.editorFactory.getEditor(i,e)}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,o,s){var R,T;var r=this.getDataItem(i),n=i<s&&!r,a="slick-row"+(this._layout.isFrozenRow(i)?" frozen":"")+(n?" loading":"")+(i===this._activeRow?" active":"")+(i%2==1?" odd":" even");r||(a+=" "+this._options.addNewRowCssClass);var h=(T=(R=this._data).getItemMetadata)==null?void 0:T.call(R,i);h&&h.cssClasses&&(a+=" "+h.cssClasses);var u=this._layout.getFrozenRowOffset(i),v="<div class='"+(this._options.useLegacyUI?"ui-widget-content ":"")+a+"' style='top:"+(this.getRowTop(i)-u)+"px'>";e.push(v);let c=this._layout.getFrozenCols();c&&t.push(v);for(var m,C,y=this._cols,w=0,S=y.length;w<S;w++){var M=null;C=y[w],m=1,h&&h.columns&&(M=h.columns[C.id]||h.columns[w],m=M&&M.colspan||1,m==="*"&&(m=S-w));let _=c&&w<c;if(_||this._colRight[Math.min(S-1,w+m-1)]>o.leftPx){if(!_&&this._colLeft[w]>o.rightPx)break;this.appendCellHtml(c>0&&w>=c?t:e,i,w,m,r,M)}m>1&&(w+=m-1)}e.push("</div>"),c&&t.push("</div>")}appendCellHtml(e,t,i,o,s,r){var R,T,_,H,O,D,B;var n=this._cols,a=this._layout.getFrozenCols(),h=n[i],u="slick-cell l"+i+" r"+Math.min(n.length-1,i+o-1)+(h.cssClass?" "+h.cssClass:"");i<a&&(u+=" frozen"),t===this._activeRow&&i===this._activeCell&&(u+=" active"),r&&r.cssClasses&&(u+=" "+r.cssClasses);for(var v in this._cellCssClasses)this._cellCssClasses[v][t]&&this._cellCssClasses[v][t][h.id]&&(u+=" "+this._cellCssClasses[v][t][h.id]);var c;let m={cell:i,column:h,escape:G,grid:this,item:s,row:t};if(s&&(m.value=this.getDataItemValueForColumn(s,h),c=this.getFormatter(t,h)(m),typeof c=="string"&&c.length&&(c=(T=(R=this._options).sanitizer)==null?void 0:T.call(R,c))),u=G(u),(_=m.addClass)!=null&&_.length||(H=m.addAttrs)!=null&&H.length||(O=m.tooltip)!=null&&O.length){(D=m.addClass)!=null&&D.length&&(u+=" "+G(m.addClass)),e.push('<div class="'+u+'"'),(B=m.addClass)!=null&&B.length&&e.push(' data-fmtcls="'+G(m.addClass)+'"');var C=m.addAttrs;if(C!=null){var y=[];for(var w in C)e.push(w+'="'+G(C[w])+'"'),y.push(w);e.push(' data-fmtatt="'+G(y.join(","))+'"')}var S=m.tooltip;S!=null&&S.length&&e.push('tooltip="'+G(S)+'"'),c!=null?e.push(">"+c+"</div>"):e.push("></div>")}else c!=null&&!(c instanceof Node)?e.push('<div class="'+u+'">'+c+"</div>"):e.push('<div class="'+u+'"></div>');var M=this._rowsCache[t];M.cellRenderQueue.push(i),M.cellRenderContent.push(c instanceof Node?c:void 0),this._rowsCache[t].cellColSpans[i]=o}cleanupRows(e){var t;for(var i in this._rowsCache)t=parseInt(i,10),t!==this._activeRow&&(t<e.top||t>e.bottom)&&!this._layout.isFrozenRow(t)&&this.removeRowFromCache(t);this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render(),this.updateGrandTotals()}invalidateAllRows(){this._currentEditor&&this.makeActiveCellNormal();for(var e in this._rowsCache)this.removeRowFromCache(parseInt(e,10));this.startPostProcessingCleanup()}queuePostProcessedRowForCleanup(e,t){var r,n;var i=this._postProcessedRows[t];if(i){this._postProcessGroupId++;for(var o in i){var s=parseInt(o,10);this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e.cellNodesByColumnIdx[s|0],columnIdx:s|0,rowIdx:t})}this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,rowNodeL:e.rowNodeL,rowNodeR:e.rowNodeR}),(r=e.rowNodeL)==null||r.remove(),(n=e.rowNodeR)==null||n.remove()}}queuePostProcessedCellForCleanup(e,t,i){this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e,columnIdx:t,rowIdx:i}),e.remove()}removeRowFromCache(e){var i,o,s,r;var t=this._rowsCache[e];t&&(this._postCleanupActive&&this._postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,e):((o=(i=t.rowNodeL)==null?void 0:i.parentElement)==null||o.removeChild(t.rowNodeL),(r=(s=t.rowNodeR)==null?void 0:s.parentElement)==null||r.removeChild(t.rowNodeR)),delete this._rowsCache[e],delete this._postProcessedRows[e])}invalidateRows(e){var t,i;if(!(!e||!e.length)){for(this._vScrollDir=0,t=0,i=e.length;t<i;t++)this._currentEditor&&this._activeRow===e[t]&&this.makeActiveCellNormal(),this._rowsCache[e[t]]&&this.removeRowFromCache(e[t]);this.startPostProcessingCleanup()}}invalidateRow(e){this.invalidateRows([e])}updateCell(e,t){var i=this.getCellNode(e,t);i&&(this._currentEditor&&this._activeRow===e&&this._activeCell===t?this._currentEditor.loadValue(this.getDataItem(e)):(this.updateCellWithFormatter(i,e,t),this.invalidatePostProcessingResults(e)))}updateCellWithFormatter(e,t,i){var r,n;var o;let s=this.getFormatterContext(t,i);s.item&&(o=this.getFormatter(t,s.column)(s),typeof o=="string"&&o.length&&(o=(n=(r=this._options).sanitizer)==null?void 0:n.call(r,o))),this._emptyNode(e),pt(s,o,e)}updateRow(e){var t=this._rowsCache[e];if(t){this.ensureCellNodesInRowsCache(e);var i=this.getDataItem(e);for(var o in t.cellNodesByColumnIdx){var s=parseInt(o,10);e===this._activeRow&&s===this._activeCell&&this._currentEditor?this._currentEditor.loadValue(i):this.updateCellWithFormatter(t.cellNodesByColumnIdx[s],e,s)}this.invalidatePostProcessingResults(e)}}calcViewportSize(){let e=this._layout,t=this._viewportInfo;if(t.width=bt(this._container),t.groupingPanelHeight=this._options.groupingPanel&&this._options.showGroupingPanel?this._options.groupingPanelHeight+_e(this._groupingPanel):0,t.topPanelHeight=this._options.showTopPanel?this._options.topPanelHeight+_e(e.getTopPanelFor(0).parentElement):0,t.headerRowHeight=this._options.showHeaderRow?this._options.headerRowHeight+_e(e.getHeaderRowColsFor(0).parentElement):0,t.footerRowHeight=this._options.showFooterRow?this._options.footerRowHeight+_e(e.getFooterRowColsFor(0).parentElement):0,t.headerHeight=this._options.showColumnHeader?k(getComputedStyle(e.getHeaderColsFor(0).parentElement).height)+_e(e.getHeaderColsFor(0).parentElement):0,this._options.autoHeight)t.height=this._options.rowHeight*this.getDataLengthIncludingAddNew(),this._layout.calcCanvasWidth()>t.width&&(t.height+=this._scrollDims.height);else{var i=getComputedStyle(this._container);t.height=k(i.height)-k(i.paddingTop)-k(i.paddingBottom)-t.headerHeight-t.topPanelHeight-t.headerRowHeight-t.footerRowHeight-t.groupingPanelHeight}t.numVisibleRows=Math.ceil(t.height/this._options.rowHeight)}updatePagingStatusFromView(e){this._pagingActive=e.pageSize!==0,this._pagingIsLastPage=e.pageNum==e.totalPages-1}updateRowCount(){if(!this._initialized)return;var e=this.getDataLengthIncludingAddNew(),t=this._layout.getScrollCanvasY(),i=Math.round(k(getComputedStyle(t).height)),o;let s=this._layout.getFrozenRows();s?o=this.getDataLength()-s:o=e+(this._options.leaveSpaceForNewRows?this._viewportInfo.numVisibleRows-1:0);var r=Math.round(k(getComputedStyle(this._layout.getScrollContainerY()).height));let n=this._viewportInfo;var a=n.hasVScroll;n.hasVScroll=!this._options.autoHeight&&o*this._options.rowHeight>r,this.makeActiveCellNormal();var h=e-1;for(var u in this._rowsCache){var v=parseInt(u,10);v>=h&&this.removeRowFromCache(v)}this.startPostProcessingCleanup(),n.virtualHeight=Math.max(this._options.rowHeight*o,r-this._scrollDims.height),this._activeCellNode&&this._activeRow>h&&this.resetActiveCell(),n.virtualHeight<Je()?(n.realScrollHeight=this._pageHeight=n.virtualHeight,this._numberOfPages=1,this._jumpinessCoefficient=0):(n.realScrollHeight=Je(),this._pageHeight=n.realScrollHeight/100,this._numberOfPages=Math.floor(n.virtualHeight/this._pageHeight),this._jumpinessCoefficient=(n.virtualHeight-n.realScrollHeight)/(this._numberOfPages-1)),n.realScrollHeight!==i&&(this._layout.realScrollHeightChange(),this._scrollTop=this._layout.getScrollContainerY().scrollTop);var c=this._scrollTop+this._pageOffset<=n.virtualHeight-r;n.virtualHeight==0||this._scrollTop==0?this._page=this._pageOffset=0:c?this.scrollTo(this._scrollTop+this._pageOffset):this.scrollTo(n.virtualHeight-r),n.realScrollHeight!=i&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&a!=n.hasVScroll&&this.autosizeColumns(),this.updateCanvasWidth(!1)}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e==null&&(e=this._scrollTop),t==null&&(t=this._scrollLeft),this._options.rtl&&(t=Math.abs(t)),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this._viewportInfo.height)+1,leftPx:t,rightPx:t+this._viewportInfo.width}}getRenderedRange(e,t){var i=this.getVisibleRange(e,t);if(this._options.renderAllRows)i.top=0,i.bottom=this.getDataLengthIncludingAddNew()-1;else{var o=Math.round(this._viewportInfo.height/this._options.rowHeight),s=this._options.minBuffer||3;this._vScrollDir==-1?(i.top-=o,i.bottom+=s):this._vScrollDir==1?(i.top-=s,i.bottom+=o):(i.top-=s,i.bottom+=s),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom)}return this._options.renderAllCells?(i.leftPx=0,i.rightPx=this._layout.getCanvasWidth()):(i.leftPx-=this._viewportInfo.width,i.rightPx+=this._viewportInfo.width,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this._layout.getCanvasWidth(),i.rightPx)),i}ensureCellNodesInRowsCache(e){var r,n,a,h;var t=this._rowsCache[e];if(t&&t.cellRenderQueue.length)for(var i=(a=(r=t.rowNodeR)==null?void 0:r.lastElementChild)!=null?a:(n=t.rowNodeL)==null?void 0:n.lastElementChild;i&&t.cellRenderQueue.length;){var o=t.cellRenderQueue.pop(),s=t.cellRenderContent.pop();t.cellNodesByColumnIdx[o]=i,s instanceof Node&&i.appendChild(s),i=i.previousElementSibling,i==null&&(i=(h=t.rowNodeL)==null?void 0:h.lastElementChild)}}cleanUpCells(e,t){if(!this._layout.isFrozenRow(t)){var i=this._rowsCache[t],o=[],s=this._layout.getFrozenCols();for(var r in i.cellNodesByColumnIdx){var n=parseInt(r,10);if(!(n<s)){var a=i.cellColSpans[n],h=this._cols;(this._colLeft[n]>e.rightPx||this._colRight[Math.min(h.length-1,n+a-1)]<e.leftPx)&&(t==this._activeRow&&n===this._activeCell||o.push(n))}}var u,v;for(this._postProcessGroupId++;(u=o.pop())!=null;)v=i.cellNodesByColumnIdx[u],this._postCleanupActive&&this._postProcessedRows[t]&&this._postProcessedRows[t][u]?this.queuePostProcessedCellForCleanup(v,u,t):this._removeNode(v),delete i.cellColSpans[u],delete i.cellNodesByColumnIdx[u],this._postProcessedRows[t]&&delete this._postProcessedRows[t][u]}}cleanUpAndRenderCells(e){for(var t,i=[],o=[],s,r,n=this._cols,a=[],h=e.top,u=e.bottom;h<=u;h++)if(t=this._rowsCache[h],!!t){this.ensureCellNodesInRowsCache(h),this.cleanUpCells(e,h),s=0;for(var v=this._data.getItemMetadata&&this._data.getItemMetadata(h),c=v&&v.columns,m=this.getDataItem(h),C=0,y=n.length;C<y&&!(this._colLeft[C]>e.rightPx);C++){if((r=t.cellColSpans[C])!=null){C+=r>1?r-1:0;continue}var w=null;r=1,c&&(w=c[n[C].id]||c[C],r=w&&w.colspan||1,r==="*"&&(r=y-C)),this._colRight[Math.min(y-1,C+r-1)]>e.leftPx&&(this.appendCellHtml(i,h,C,r,m,w),s++),C+=r>1?r-1:0}s&&o.push(h)}if(i.length){var S=document.createElement("div");S.innerHTML=i.join("");for(var M,R,T=this._layout.getFrozenCols();(M=o.pop())!=null;){t=this._rowsCache[M];for(var _;(_=t.cellRenderQueue.pop())!=null;){var H=t.cellRenderContent.pop();R=S.lastElementChild,H instanceof Node&&R.appendChild(H),T>0&&_>=T?t.rowNodeR.appendChild(R):t.rowNodeL.appendChild(R),t.cellNodesByColumnIdx[_]=R}}}}renderRows(e){for(var t=[],i=[],o=[],s=!1,r=this.getDataLength(),n=e.top,a=e.bottom;n<=a;n++)this._rowsCache[n]||this.hasFrozenRows()&&this._options.frozenBottom&&n==r||(o.push(n),this._rowsCache[n]={rowNodeL:null,rowNodeR:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[],cellRenderContent:[]},this.appendRowHtml(t,i,n,e,r),this._activeCellNode&&this._activeRow===n&&(s=!0));if(!o.length)return;var h=document.createElement("div"),u=document.createElement("div");h.innerHTML=t.join(""),u.innerHTML=i.join("");let v=this._layout;for(var n=0,a=o.length;n<a;n++){var c=o[n],m=this._rowsCache[c];m.rowNodeL=h.firstElementChild,m.rowNodeR=u.firstElementChild,v.appendCachedRow(c,m.rowNodeL,m.rowNodeR),m.cellRenderContent.some(w=>w instanceof Node)&&this.ensureCellNodesInRowsCache(c)}s&&(this._activeCellNode=this.getCellNode(this._activeRow,this._activeCell))}startPostProcessing(){this._postRenderActive&&(clearTimeout(this._hPostRender),this._options.asyncPostRenderDelay<0?this.asyncPostProcessRows():this._hPostRender=setTimeout(this.asyncPostProcessRows,this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._postCleanupActive&&(clearTimeout(this._hPostRenderCleanup),this._options.asyncPostCleanupDelay<0?this.asyncPostProcessCleanupRows():this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay))}invalidatePostProcessingResults(e){if(this._options.enableAsyncPostRenderCleanup){var t=this._postProcessedRows[e];if(t)for(var i in t)t[i]="C"}else delete this._postProcessedRows[e];this._postProcessFromRow=Math.min(this._postProcessFromRow,e),this._postProcessToRow=Math.max(this._postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){for(var e in this._rowsCache){var t=this._rowsCache[e],i=this.getRowTop(parseInt(e,10))+"px";t.rowNodeL&&(t.rowNodeL.style.top=i),t.rowNodeR&&(t.rowNodeR.style.top=i)}}updateGrandTotals(){var r,n;if(!(!this._options.showFooterRow||!this._initialized)){var e;this._data&&this._data.getGrandTotals&&(e=this._data.getGrandTotals()),e=e!=null?e:{};var t=this._cols;for(var i of t)if(i.id!=null){var o=(r=i.groupTotalsFormatter)!=null?r:this._options.groupTotalsFormatter;if(!o)continue;var s=(n=o(e,i,this))!=null?n:"";this.getFooterRowColumn(i.id).innerHTML=s}}}groupTotalsFormatter(e,t,i){return this._options.groupTotalsFormatter?this._options.groupTotalsFormatter(e,t,i!=null?i:this):""}handleMouseWheel(e,t,i,o){var s,r;i=(typeof i=="undefined"?(s=e.originalEvent)==null?void 0:s.deltaX:i)||0,o=(typeof o=="undefined"?(r=e.originalEvent)==null?void 0:r.deltaY:o)||0,this._scrollTop=Math.max(0,this._layout.getScrollContainerY().scrollTop-o*this._options.rowHeight),this._scrollLeft=this._layout.getScrollContainerX().scrollLeft+i*10,this.handleScroll(!0)}handleScroll(e){this._scrollTop=this._layout.getScrollContainerY().scrollTop,this._scrollLeft=this._layout.getScrollContainerX().scrollLeft;var t=Math.abs(this._scrollTop-this._scrollTopPrev),i=Math.abs(this._scrollLeft-this._scrollLeftPrev);(i||t)&&(this._ignoreScrollUntil=new Date().getTime()+100),i&&(this._scrollLeftPrev=this._scrollLeft,this._layout.getScrollContainerX().scrollLeft=this._scrollLeft,this._layout.handleScrollH());let o=this._viewportInfo;if(t)if(this._vScrollDir=this._scrollTopPrev<this._scrollTop?1:-1,this._scrollTopPrev=this._scrollTop,e===!0&&(this._layout.getScrollContainerY().scrollTop=this._scrollTop),this._layout.handleScrollV(),t<this._viewportInfo.height)this.scrollTo(this._scrollTop+this._pageOffset);else{var s=this._pageOffset;o.realScrollHeight==o.height?this._page=0:this._page=Math.min(this._numberOfPages-1,Math.floor(this._scrollTop*((o.virtualHeight-this._viewportInfo.height)/(o.realScrollHeight-this._viewportInfo.height))*(1/this._pageHeight))),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient),s!=this._pageOffset&&this.invalidateAllRows()}return(i||t)&&(this._hRender&&clearTimeout(this._hRender),(Math.abs(this._scrollTopRendered-this._scrollTop)>20||Math.abs(this._scrollLeftRendered-this._scrollLeft)>20)&&(this._options.forceSyncScrolling||this._options.forceSyncScrollInterval&&this._lastRenderTime<new Date().getTime()-this._options.forceSyncScrollInterval?this.render():this._hRender=setTimeout(this.render,50),this.trigger(this.onViewportChanged))),this.trigger(this.onScroll,{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop}),!!(i||t)}asyncPostProcessCleanupRows(){var s;for(var e=this._cols;((s=this._postProcessCleanupQueue)==null?void 0:s.length)>0;){for(var t=this._postProcessCleanupQueue[0].groupId;this._postProcessCleanupQueue.length>0&&this._postProcessCleanupQueue[0].groupId==t;){var i=this._postProcessCleanupQueue.shift();if(i.rowNodeL&&i.rowNodeL.remove(),i.rowNodeR&&i.rowNodeR.remove(),i.cellNode!=null){var o=e[i.columnIdx];o&&o.asyncPostRenderCleanup&&(o.asyncPostRenderCleanup(i.cellNode,i.rowIdx,o),this._removeNode(i.cellNode))}}if(this._options.asyncPostRenderDelay>=0){this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay);return}}}updateCellCssStylesOnRenderedRows(e,t){var i,o,s,r;for(var n in this._rowsCache){if(r=t&&t[n],s=e&&e[n],r){for(o in r)if((!s||r[o]!=s[o])&&(i=this.getCellNode(parseInt(n,10),this.getColumnIndex(o)),i)){let a=r[o];De(i,a)}}if(s){for(o in s)if((!r||r[o]!=s[o])&&(i=this.getCellNode(parseInt(n,10),this.getColumnIndex(o)),i)){let a=s[o];ne(i,a)}}}}addCellCssStyles(e,t){if(this._cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}removeCellCssStyles(e){this._cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this._cellCssClasses[e]),delete this._cellCssClasses[e],this.trigger(this.onCellCssStylesChanged,{key:e,hash:null}))}setCellCssStyles(e,t){var i=this._cellCssClasses[e];this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}getCellCssStyles(e){return this._cellCssClasses[e]}flashCell(e,t,i){if(i=i||100,this._rowsCache[e]){var o=this._jQuery(this.getCellNode(e,t));r(4)}var s=this._options.cellFlashingCssClass;function r(n){n&&setTimeout(function(){o.queue(function(){o.toggleClass(s).dequeue(),r(n-1)})},i)}}handleDragInit(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var o=this.trigger(this.onDragInit,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?(e.preventDefault(),o):!1}handleDragStart(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var o=this.trigger(this.onDragStart,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?o:!1}handleDrag(e,t){return this.trigger(this.onDrag,t,e)}handleDragEnd(e,t){this.trigger(this.onDragEnd,t,e)}handleKeyDown(e){this.trigger(this.onKeyDown,{row:this._activeRow,cell:this._activeCell},e);var t=e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped();if(!t&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;e.key==="Home"?e.ctrlKey?(this.navigateTop(),t=!0):t=this.navigateRowStart():e.key==="End"&&(e.ctrlKey?(this.navigateBottom(),t=!0):t=this.navigateRowEnd())}if(!t)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;if(e.key==="Esc"||e.key==="Escape"){if(!this.getEditorLock().isActive())return;this.cancelEditAndSetFocus()}else e.key==="PageDown"?(this.navigatePageDown(),t=!0):e.key==="PageUp"?(this.navigatePageUp(),t=!0):e.key==="Left"||e.key==="ArrowLeft"?t=this.navigateLeft():e.key==="Right"||e.key==="ArrowRight"?t=this.navigateRight():e.key==="Up"||e.key==="ArrowUp"?t=this.navigateUp():e.key==="Down"||e.key==="ArrowDown"?t=this.navigateDown():e.key==="Tab"?this._options.enableTabKeyNavigation&&(t=this.navigateNext()):e.key==="Enter"&&(this._options.editable&&(this._currentEditor?this._activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock().commitCurrentEdit()&&this.makeActiveCellEditable()),t=!0)}else e.key==="Tab"&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(t=this.navigatePrev());if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(i){}}}getTextSelection(){var e=null;return window.getSelection&&window.getSelection().rangeCount>0&&(e=window.getSelection().getRangeAt(0)),e}setTextSelection(e){if(window.getSelection&&e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}handleClick(e){var n,a,h;if(!this._currentEditor&&(e.target!=document.activeElement||(h=(a=(n=e.target)==null?void 0:n.classList)==null?void 0:a.contains)!=null&&h.call(a,"slick-cell"))){var t=this.getTextSelection();this.setFocus(),t&&this._options.enableTextSelectionOnCells&&this.setTextSelection(t)}var i=this.getCellFromEvent(e);if(!(!i||this._currentEditor!=null&&this._activeRow==i.row&&this._activeCell==i.cell)&&(this.trigger(this.onClick,{row:i.row,cell:i.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this.canCellBeActive(i.row,i.cell)&&(!this.getEditorLock().isActive()||this.getEditorLock().commitCurrentEdit()))){var o=e.target&&e.target.classList.contains(lt),s=this._cols[i.cell],r=!!(this._options.editable&&s&&s.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(i.row,i.cell),null,o,r,e)}}handleContextMenu(e){var t=e.target.closest(".slick-cell");t&&(this._activeCellNode===t&&this._currentEditor!=null||this.trigger(this.onContextMenu,{},e))}handleDblClick(e){var t=this.getCellFromEvent(e);!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell||(this.trigger(this.onDblClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this._options.editable&&this.gotoCell(t.row,t.cell,!0))}handleHeaderMouseEnter(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseEnter,{column:t},e)}handleHeaderMouseLeave(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseLeave,{column:t},e)}handleHeaderContextMenu(e){var t=e.target.closest(".slick-header-column"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){var t=e.target.closest(".slick-header-column"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderClick,{column:i},e)}handleMouseEnter(e){this.trigger(this.onMouseEnter,{},e)}handleMouseLeave(e){this.trigger(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this._cols.length)}getCellFromPoint(e,t){for(var i=this.getRowFromPosition(t),o=0,s=this._cols,r=0,n=0;n<s.length&&r<e;n++)r+=s[n].width,o++;return o<0&&(o=0),{row:i,cell:o-1}}getCellFromNode(e){if(e==null)return null;var t=e.dataset.c;if(t!=null)return parseInt(t,10);var i=/\sl(\d+)\s/.exec(" "+e.className+" ");return i?parseInt(i[1],10):null}getColumnFromNode(e){if(e==null)return null;var t=this.getCellFromNode(e);return t===null&&this._jQuery?this._jQuery(t).data("column"):this._cols[t]}getRowFromNode(e){if(e!=null)for(var t in this._rowsCache){var i=this._rowsCache[t];if(i.rowNodeL===e||i.rowNodeR===e)return parseInt(t,10)}return null}getCellFromEvent(e){var t,i,o=e.target.closest(".slick-cell");return!o||(t=this._layout.getRowFromCellNode(o,e.clientX,e.clientY),i=this.getCellFromNode(o),t==null||i==null)?null:{row:t,cell:i}}getCellNodeBox(e,t){if(!this.cellExists(e,t))return null;for(var i=this._layout.getFrozenRowOffset(e),o=this._cols,s=this._layout.getFrozenCols(),r=this.getRowTop(e)-i,n=r+this._options.rowHeight-1,a=0,h=0;h<t;h++)a+=o[h].width,h==s-1&&(a=0);var u=a+o[t].width;return this._options.rtl?{top:r,right:a,bottom:n,left:u}:{top:r,left:a,bottom:n,right:u}}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){this._tabbingDirection==-1?this._focusSink1.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),!(t<this._layout.getFrozenCols())){var o=this.getColspan(e,t);this.internalScrollColumnIntoView(this._colLeft[t],this._colRight[t+(o>1?o-1:0)])}}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this._colLeft[e],this._colRight[e])}internalScrollColumnIntoView(e,t){var i=this._scrollLeft+k(getComputedStyle(this._layout.getScrollContainerX()).width)-(this._viewportInfo.hasVScroll?this._scrollDims.width:0),o;if(e<this._scrollLeft)o=e;else if(t>i)o=Math.min(e,t-this._layout.getScrollContainerX().clientWidth);else return;this._layout.getScrollContainerX().scrollLeft=o,this.handleScroll(),this.render()}setActiveCellInternal(e,t,i,o,s){var v,c;if(this._activeCellNode){this.makeActiveCellNormal(),this._activeCellNode.classList.remove("active");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.remove("active"),r.rowNodeR&&r.rowNodeR.classList.remove("active"))}if(this._activeCellNode=e,this._activeCellNode){var n=this._activeCellNode.getBoundingClientRect(),a=Math.floor((c=(v=this._activeCellNode.closest(".grid-canvas"))==null?void 0:v.getBoundingClientRect().top)!=null?c:0+document.body.scrollTop),h=this._activeCellNode.closest(".grid-canvas-bottom")!=null;this.hasFrozenRows()&&h&&(a-=this._options.frozenBottom?Math.round(k(getComputedStyle(this._layout.getCanvasNodeFor(0,0)).height)):this._layout.getFrozenRows()*this._options.rowHeight);var u=this.getCellFromPoint(n[this._options.rtl?"right":"left"]+document.body.scrollLeft,Math.ceil(n.top+document.body.scrollTop)-a);if(this._activeRow=u.row,this._activeCell=this._activePosX=this.getCellFromNode(this._activeCellNode),this._options.showCellSelection){this._activeCellNode.classList.add("active");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.add("active"),r.rowNodeR&&r.rowNodeR.classList.add("active"))}t==null&&(t=this._activeRow==this.getDataLength()||this._options.autoEdit),this._options.editable&&t&&this.isCellPotentiallyEditable(this._activeRow,this._activeCell)&&(clearTimeout(this._hEditorLoader),this._options.asyncEditorLoading?this._hEditorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,i,s)},this._options.asyncEditorLoadDelay):this.makeActiveCellEditable(void 0,i,s))}else this._activeRow=this._activeCell=null;o||this.trigger(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,t){var i=this.getDataLength();return!(e<i&&!this.getDataItem(e)||this._cols[t].cannotTriggerInsert&&e>=i||!this.getEditor(e,t))}makeActiveCellNormal(){this._currentEditor&&(this.trigger(this.onBeforeCellEditorDestroy,{editor:this._currentEditor}),this._currentEditor.destroy(),this._currentEditor=null,this._activeCellNode&&(this._activeCellNode.classList.remove("editable","invalid"),this.updateCellWithFormatter(this._activeCellNode,this._activeRow,this._activeCell),this.invalidatePostProcessingResults(this._activeRow)),navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock().deactivate(this._editController))}editActiveCell(e){this.makeActiveCellEditable(e)}makeActiveCellEditable(e,t,i){if(this._activeCellNode){if(!this._options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(this._hEditorLoader),!!this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){var o=this._cols[this._activeCell],s=this.getDataItem(this._activeRow);if(this.trigger(this.onBeforeEditCell,{row:this._activeRow,cell:this._activeCell,item:s,column:o})===!1){this.setFocus();return}this.getEditorLock().activate(this._editController),this._activeCellNode.classList.add("editable");var r=e||this.getEditor(this._activeRow,this._activeCell);!e&&!r.suppressClearOnEdit&&(this._activeCellNode.innerHTML="");var n=this._data.getItemMetadata&&this._data.getItemMetadata(this._activeRow),a=n&&n.columns,h=a&&(a[o.id]||a[this._activeCell]);this._currentEditor=new r({grid:this,gridPosition:Pe(this._container),position:Pe(this._activeCellNode),container:this._activeCellNode,column:o,columnMetaData:h,item:s||{},event:i,editorCellNavOnLRKeys:this._options.editorCellNavOnLRKeys,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)}),s&&(this._currentEditor.loadValue(s),t&&this._currentEditor.preClick&&this._currentEditor.preClick()),this._serializedEditorValue=this._currentEditor.serializeValue(),this._currentEditor.position&&this.handleActiveCellPositionChange()}}}commitEditAndSetFocus(){this.getEditorLock().commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock().cancelCurrentEdit()&&this.setFocus()}getActiveCellPosition(){return Pe(this._activeCellNode)}getGridPosition(){return Pe(this._container)}getCellEditor(){return this._currentEditor}getActiveCell(){return this._activeCellNode?{row:this._activeRow,cell:this._activeCell}:null}getActiveCellNode(){return this._activeCellNode}scrollActiveCellIntoView(){this._activeRow!=null&&this._activeCell!=null&&this.scrollCellIntoView(this._activeRow,this._activeCell)}scrollRowIntoView(e,t){if(!this._layout.isFrozenRow(e)){var i=Math.round(k(getComputedStyle(this._layout.getScrollContainerY()).height)),o=this.hasFrozenRows()&&!this._options.frozenBottom?e-this._layout.getFrozenRows()+1:e,s=o*this._options.rowHeight,r=(o+1)*this._options.rowHeight-i+(this._viewportInfo.hasHScroll?this._scrollDims.height:0);(o+1)*this._options.rowHeight>this._scrollTop+i+this._pageOffset?(this.scrollTo(t?s:r),this.render()):o*this._options.rowHeight<this._scrollTop+this._pageOffset&&(this.scrollTo(t?r:s),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){var t=e*this._viewportInfo.numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this._scrollTop)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&this._activeRow!=null){var i=this._activeRow+t,o=this.getDataLengthIncludingAddNew();i>=o&&(i=o-1),i<0&&(i=0);for(var s=0,r=null,n=this._activePosX;s<=this._activePosX;)this.canCellBeActive(i,s)&&(r=s),s+=this.getColspan(i,s);r!=null?(this.setActiveCellInternal(this.getCellNode(i,r)),this._activePosX=n):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){var t=this.getDataLength();if(!t)return!0;if(e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&this._activeRow!=null){for(var i=0,o=null,s=this._activePosX;i<=this._activePosX;)this.canCellBeActive(e,i)&&(o=i),i+=this.getColspan(e,i);o!=null?(this.setActiveCellInternal(this.getCellNode(e,o)),this._activePosX=s):this.resetActiveCell()}return!0}getColspan(e,t){var i=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(!i||!i.columns)return 1;var o=this._cols,s=o[t]&&(i.columns[o[t].id]||i.columns[t]),r=s&&s.colspan;return r==="*"?r=o.length-t:r=r||1,r}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(e){if(!this._options.enableCellNavigation||!this._activeCellNode&&e!="prev"&&e!="next")return!1;if(!this.getEditorLock().commitCurrentEdit())return!0;this.setFocus(),this._cellNavigator||(this._cellNavigator=new Me({getColumnCount:()=>this._cols.length,getRowCount:()=>this.getDataLengthIncludingAddNew(),getColspan:this.getColspan.bind(this),canCellBeActive:this.canCellBeActive.bind(this),setTabbingDirection:o=>this._tabbingDirection=o,isRTL:()=>this._options.rtl}));var t=this._cellNavigator.navigate(e,this._activeRow,this._activeCell,this._activePosX);if(t){if(this.hasFrozenRows()&&this._options.frozenBottom&&t.row==this.getDataLength())return;var i=t.row==this.getDataLength();return this._layout.isFrozenRow(t.row)||this.scrollCellIntoView(t.row,t.cell,!i),this.setActiveCellInternal(this.getCellNode(t.row,t.cell)),this._activePosX=t.posX,!0}else return this.setActiveCellInternal(this.getCellNode(this._activeRow,this._activeCell)),!1}getCellNode(e,t){return this._rowsCache[e]?(this.ensureCellNodesInRowsCache(e),this._rowsCache[e].cellNodesByColumnIdx[t]):null}setActiveCell(e,t){if(this._initialized){var i=this._cols;e>this.getDataLength()||e<0||t>=i.length||t<0||this._options.enableCellNavigation&&(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),!1))}}setActiveRow(e,t,i){this._initialized&&(e>this.getDataLength()||e<0||t>=this._cols.length||t<0||(this._activeRow=e,i||this.scrollCellIntoView(e,t||0,!1)))}canCellBeActive(e,t){var i=this._cols;if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=i.length||t<0)return!1;var o=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(o&&typeof o.focusable=="boolean")return o.focusable;var s=o&&o.columns;return s&&i[t]&&s[i[t].id]&&typeof s[i[t].id].focusable=="boolean"?s[i[t].id].focusable:s&&s[t]&&typeof s[t].focusable=="boolean"?s[t].focusable:i[t].focusable}canCellBeSelected(e,t){var i=this._cols;if(e>=this.getDataLength()||e<0||t>=i.length||t<0)return!1;var o=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(o&&typeof o.selectable=="boolean")return o.selectable;var s=o&&o.columns&&(o.columns[i[t].id]||o.columns[t]);return s&&typeof s.selectable=="boolean"?s.selectable:i[t].selectable}gotoCell(e,t,i){if(this._initialized&&this.canCellBeActive(e,t)&&this.getEditorLock().commitCurrentEdit()){this.scrollCellIntoView(e,t,!1);var o=this.getCellNode(e,t);this.setActiveCellInternal(o,i||e===this.getDataLength()||this._options.autoEdit),this._currentEditor||this.setFocus()}}commitCurrentEdit(){var e=this.getDataItem(this._activeRow),t=this._cols[this._activeCell],i=this;if(this._currentEditor){if(this._currentEditor.isValueChanged()){var o=this._currentEditor.validate();if(o.valid){if(this._activeRow<this.getDataLength()){var s={row:this._activeRow,cell:i._activeCell,editor:this._currentEditor,serializedValue:this._currentEditor.serializeValue(),prevSerializedValue:this._serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})}};this._options.editCommandHandler?(this.makeActiveCellNormal(),this._options.editCommandHandler(e,t,s)):(s.execute(),this.makeActiveCellNormal())}else{var r={};this._currentEditor.applyValue(r,this._currentEditor.serializeValue()),this.makeActiveCellNormal(),this.trigger(this.onAddNewRow,{item:r,column:t})}return!this.getEditorLock().isActive()}else return this._activeCellNode.classList.remove("invalid"),this._activeCellNode.offsetWidth,this._activeCellNode.classList.add("invalid"),this.trigger(this.onValidationError,{editor:this._currentEditor,cellNode:this._activeCellNode,validationResults:o,row:this._activeRow,cell:this._activeCell,column:t}),this._currentEditor.focus(),!1}this.makeActiveCellNormal()}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){for(var t=[],i=this._cols.length-1,o=0;o<e.length;o++)t.push(new pe(e[o],0,e[o],i));return t}getSelectedRows(){if(!this._selectionModel)throw"Selection model is not set";return this._selectedRows}setSelectedRows(e){if(!this._selectionModel)throw"Selection model is not set";this._selectionModel.setSelectedRanges(this.rowsToRanges(e))}};var Mo=function(){var l,e,t,i,o,s,r,n,a,h,u,v,c,m,C,y,w,S,M,R,T,_,H,O,D,B,q,Z,U,J,ee,te,de,ie,Q,Y,N,K;function je(d,g,f){var x=r&&d>=o+(i?0:1);x?(g&&u.appendChild(g),s&&f&&v.appendChild(f)):(g&&c.appendChild(g),s&&f&&m.appendChild(f))}let fe=()=>{var d=b.getColumns(),g=d.length;for(e=t=0;g--;)s>0&&g>=s?t+=d[g].width:e+=d[g].width;var f=e+t;return b.getOptions().fullWidthRows?Math.max(f,b.getAvailableWidth()):f};var b;function Qe(d){b=d;let g=fe()+b.getScrollDims().width+"px",f=b.getOptions(),x=f.useLegacyUI?" ui-state-default":"";C=p("div",{class:"slick-header-columns slick-header-columns-left",style:(f.rtl?"right":"left")+":-1000px"}),q=p("div",{class:"slick-pane slick-pane-header slick-pane-left",tabIndex:"0"},p("div",{class:"slick-header slick-header-left"+x,style:!f.showColumnHeader&&"display: none"},C)),y=p("div",{class:"slick-header-columns slick-header-columns-right",style:(f.rtl?"right":"left")+":-1000px"}),Z=p("div",{class:"slick-pane slick-pane-header slick-pane-right",tabIndex:"0"},p("div",{class:"slick-header slick-header-right"+x,style:!f.showColumnHeader&&"display: none"},y)),w=p("div",{class:"slick-headerrow-columns slick-headerrow-columns-left"}),M=ge(g);var V=p("div",{class:"slick-headerrow"+x,style:!f.showHeaderRow&&"display: none"},w,M);de=p("div",{class:"slick-top-panel",style:"width: 10000px"});var P=p("div",{class:"slick-top-panel-scroller"+x,style:!f.showTopPanel&&"display: none"},de);c=p("div",{class:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:"0",hideFocus:""}),N=p("div",{class:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:"0",hideFocus:""},c),T=p("div",{class:"slick-footerrow-columns slick-footerrow-columns-left"}),H=ge(g);var I=p("div",{class:"slick-footerrow"+x,style:!f.showFooterRow&&"display: none"},T,H);U=p("div",{class:"slick-pane slick-pane-top slick-pane-left",tabIndex:"0"},V,P,N,I),S=p("div",{class:"slick-headerrow-columns slick-headerrow-columns-right"}),R=ge(g);var se=p("div",{class:"slick-headerrow"+x,style:!f.showHeaderRow&&"display: none"},S,R);ie=p("div",{class:"slick-top-panel",style:"width: 10000px"});var X=p("div",{class:"slick-top-panel-scroller"+x,style:!f.showTopPanel&&"display: none"},ie);m=p("div",{class:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:"0",hideFocus:""}),K=p("div",{class:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:"0",hideFocus:""},m),_=p("div",{class:"slick-footerrow-columns slick-footerrow-columns-right"}),O=p("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:g});var z=p("div",{class:"slick-footer-row"+x,style:!f.showFooterRow&&"display: none"},_,O);J=p("div",{class:"slick-pane slick-pane-top slick-pane-right",tabIndex:"0"},se,X,K,z),u=p("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:"0",hideFocus:""}),Q=p("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:"0",hideFocus:""},u),D=p("div",{class:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:"0"},Q),v=p("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:"0",hideFocus:""}),Y=p("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:"0",hideFocus:""}),B=p("div",{class:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:"0"},Y),b.getContainerNode().append(q,Z,U,J,D,B),He(C),He(y),nt()}function Ke(){return[C,y]}function be(){return[w,S]}function Xe(){return[T,_]}let E=(d,g)=>{if(g==null&&d==null)return c;var f=d>=s;return r>0&&g>=o+(i?0:1)?f?v:u:f?m:c};function F(){return l}function A(){return[c,m,u,v]}function W(){return ee}function oe(){return te}function ae(d,g){if(g==null&&d==null)return c;var f=d>=s;return r>0&&g>=o+(i?0:1)?f?v:u:f?m:c}function he(){return[N,K,Q,Y]}let j=()=>{var d=l,g=e,f=t,x;l=fe();var V=b.getScrollDims().width;x=l!==d||e!==g||t!==f;var P=b.getViewportInfo();if(x||s||r){var I=e+"px",se=t+"px";if(c.style.width=I,rt(),s){var X=P.width-e+"px";let re=b.getOptions().rtl;m.style.width=se,q.style.width=I,Z.style[re?"right":"left"]=I,Z.style.width=X,U.style.width=I,J.style[re?"right":"left"]=I,J.style.width=X,w.style.width=I,w.parentElement.style.width=I,S.style.width=se,S.parentElement.style.width=X,T.style.width=I,T.parentElement.style.width=I,_.style.width=se,_.parentElement.style.width=X,N.style.width=I,K.style.width=X,r&&(D.style.width=I,B.style[re?"right":"left"]=I,Q.style.width=I,Y.style.width=X,u.style.width=I,v.style.width=se)}else q.style.width="100%",U.style.width="100%",w.parentElement.style.width="100%",w.style.width=l+"px",T.parentElement.style.width="100%",T.style.width=l+"px",N.style.width="100%",r&&(Q.style.width="100%",u.style.width=I);P.hasHScroll=l>P.width-V}var z=l+(P.hasHScroll?V:0)+"px";return M.style.width=z,R.style.width=z,H.style.width=z,O.style.width=z,x},ue=d=>s>0&&d>=s?y.children.item(d-s):C.children.item(d),Ee=d=>{var g;return s<=0||d<s?g=w:(g=S,d-=s),g.childNodes.item(d)},ce=d=>{var g;return s<=0||d<s?g=T:(g=_,d-=s),g.childNodes.item(d)},At=d=>s>0&&d>=s?S:w,Nt=d=>s>0&&d>=s?_:T,rt=()=>{n=a=0;for(var d=b.getScrollDims().width,g=b.getColumns(),f=0,x=g.length;f<x;f++){var V=g[f].width;s>0&&f>=s?a+=V:n+=V}let P=b.getViewportInfo();s>0?(n=n+1e3,a=Math.max(a,P.width)+n,a+=d):(n+=d,n=Math.max(n,P.width)+1e3),C.style.width=n+"px",y.style.width=a+"px"},Vt=d=>s>0&&d>=s?y:C,zt=()=>{let d=b.getOptions(),g=b.getScrollLeft();s?(d.showColumnHeader&&(y.parentElement.scrollLeft=g),d.showTopPanel&&(ie.parentElement.scrollLeft=g),d.showHeaderRow&&(S.parentElement.scrollLeft=g),d.showFooterRow&&(_.parentElement.scrollLeft=g),r&&(K.scrollLeft=g)):(d.showColumnHeader&&(C.parentElement.scrollLeft=g),d.showTopPanel&&(de.parentElement.scrollLeft=g),d.showHeaderRow&&(w.parentElement.scrollLeft=g),d.showFooterRow&&(T.parentElement.scrollLeft=g),r&&(N.scrollLeft=g))},Ot=()=>{s&&(r&&!i?Q.scrollTop=b.getScrollTop():N.scrollTop=b.getScrollTop())},Wt=()=>{s?r?i?(ee=Y,te=K):ee=te=Y:ee=te=K:r?i?(ee=Q,te=N):ee=te=Q:ee=te=N},Gt=()=>{Z.style.display=J.style.display=s?"":"none",D.style.display=r?"":"none",B.style.display=r&&s?"":"none"},Bt=()=>{let d=b.getOptions();var g=d.alwaysAllowHorizontalScroll,f=d.alwaysShowVerticalScroll;N.style.overflowX=K.style.overflowX=r&&!g?"hidden":s?"scroll":"auto",N.style.overflowY=Q.style.overflowY=!s&&f?"scroll":s?"hidden":r?"scroll":d.autoHeight?"hidden":"auto",K.style.overflowY=f||r?"scroll":d.autoHeight?"hidden":"auto",Q.style.overflowX=Y.style.overflowX=s&&!g?"scroll":"auto",Y.style.overflowY=f?"scroll":"auto"},jt=()=>{for(var d=r&&!i?u:c;(d=d.parentNode)!=document.body&&d!=null;)(d==N||d.scrollWidth!=d.clientWidth||d.scrollHeight!=d.clientHeight)&&b.bindAncestorScroll(d)},Qt=()=>{let d=e;l=fe(),s&&e!=d&&(C.style.width=e+1e3+"px",Z.style[b.getOptions().rtl?"right":"left"]=e+"px")},Kt=()=>{var d=0,g,f,x=b.getColumns(),V=b.getOptions(),P=V.rtl,I=P?"right":"left",se=P?"left":"right";if(V.useCssVars)for(var X=b.getContainerNode().style,z=0;z<x.length;z++){s==z&&(d=0),g=x[z].width;var re="--l"+z,Ue=X.getPropertyValue(re),Re=d+"px";Ue!==Re&&X.setProperty(re,Re),re="--r"+z,Ue=X.getPropertyValue(re),Re=(s>0&&z>=s?t:e)-d-g+"px",Ue!==Re&&X.setProperty(re,Re),d+=g}else for(var z=0;z<x.length;z++)s==z&&(d=0),g=x[z].width,f=b.getColumnCssRules(z),f[I].style[I]=d+"px",f[se].style[se]=(s>0&&z>=s?t:e)-d-g+"px",d+=g},Xt=d=>s>0&&d>=s?ie:de,Ut=()=>[de,ie],Yt=()=>{var d=0,g=0;let f=b.getViewportInfo(),x=b.getOptions();if(r){let P=r*x.rowHeight;i?(d=f.height-P,g=P+b.getScrollDims().height):(d=P,g=f.height-P)}else d=f.height;d+=f.topPanelHeight+f.headerRowHeight+f.footerRowHeight,h=d-f.topPanelHeight-f.headerRowHeight-f.footerRowHeight,x.autoHeight&&(b.getContainerNode().style.height=d+f.groupingPanelHeight+k(getComputedStyle(C.parentElement).height)+"px"),U.style.top=f.groupingPanelHeight+(k(getComputedStyle(q).height)||f.headerHeight)+"px",U.style.height=d+"px";var V=U.offsetTop+d;if(x.autoHeight?N.style.height="":N.style.height=h+"px",s?(J.style.top=U.style.top,J.style.height=U.style.height,K.style.height=N.style.height,r&&(D.style.top=B.style.top=V+"px",D.style.height=B.style.height=Y.style.height=g+"px")):r&&(D.style.width="100%",D.style.height=g+"px",D.style.top=V+"px"),r){Q.style.height=g+"px";let P=r*x.rowHeight;i?(u.style.height=P+"px",s&&(v.style.height=P+"px")):(c.style.height=P+"px",s&&(m.style.height=P+"px"))}else K.style.height=h+"px"};function $t(d,g){if(g=g||(b==null?void 0:b.getOptions()),(g==null?void 0:g.frozenColumns)==null)g==null||delete g.frozenColumns;else{var f=g.frozenColumns;g.frozenColumns=0;for(var x=0;x<d.length;){var V=d[x++];f>0&&V.visible!==!1?(V.frozen=!0,g.frozenColumns++,f--):V.frozen!==void 0&&delete V.frozen}}var P=d.filter(I=>I.frozen);return s=P.length,s?P.concat(d.filter(I=>!I.frozen)):d}function qt(d){(d.frozenRows!=null||d.frozenBottom!=null)&&nt()}function nt(){let d=b.getOptions();if(d.autoHeight){r=0;return}r=d.frozenRows>0&&d.frozenRows<=b.getViewportInfo().numVisibleRows?d.frozenRows:0,r&&(o=d.frozenBottom?b.getDataLength()-r:r-1)}function Zt(){return r&&!i?u:c}function Jt(){let d=b.getViewportInfo().realScrollHeight;r&&!i?(u.style.height=d+"px",s&&(v.style.height=d+"px")):(c.style.height=d+"px",m.style.height=d+"px")}function ei(d){return r&&(i&&d>=o||!i&&d<=o)}function ti(d){if(r){var g=Object.assign({},d);i?(g.top=o,g.bottom=b.getDataLength()-1):(g.top=0,g.bottom=o),b.cleanUpAndRenderCells(g)}}function ii(d){r&&(i?b.renderRows({top:o,bottom:b.getDataLength()-1,leftPx:d.leftPx,rightPx:d.rightPx}):b.renderRows({top:0,bottom:o,leftPx:d.leftPx,rightPx:d.rightPx}))}function oi(d){if(!r||i&&d<o||!i&&d<=o)return 0;if(!i)return r*b.getOptions().rowHeight;var g=b.getViewportInfo().realScrollHeight;return g>=h?g:o*b.getOptions().rowHeight}function si(d,g,f){var x=b.getRowFromNode(d.parentNode);if(r){var V=d.closest(".grid-canvas").getBoundingClientRect(),P=0,I=d.closest(".grid-canvas-bottom")!=null;return I&&(P=i?Math.round(k(getComputedStyle(c).height)):r*b.getOptions().rowHeight),b.getCellFromPoint(g-V[b.getOptions().rtl?"right":"left"]-document.body.scrollLeft,f-V.top+document.body.scrollTop+P+document.body.scrollTop).row}return x}function ri(){return s}function ni(){return r}function li(){b=null}return{afterHeaderColumnDrag:Qt,afterRenderRows:ii,afterSetOptions:qt,appendCachedRow:je,applyColumnWidths:Kt,bindAncestorScrollEvents:jt,beforeCleanupAndRenderCells:ti,calcCanvasWidth:fe,updateHeadersWidth:rt,isFrozenRow:ei,destroy:li,getCanvasNodeFor:E,getCanvasNodes:A,getCanvasWidth:F,getFooterRowCols:Xe,getFooterRowColsFor:Nt,getFooterRowColumn:ce,getFrozenCols:ri,getFrozenRows:ni,getHeaderCols:Ke,getHeaderColsFor:Vt,getHeaderColumn:ue,getHeaderRowCols:be,getHeaderRowColsFor:At,getHeaderRowColumn:Ee,getRowFromCellNode:si,getFrozenRowOffset:oi,getScrollCanvasY:Zt,getScrollContainerX:W,getScrollContainerY:oe,getTopPanelFor:Xt,getTopPanelNodes:Ut,getViewportNodeFor:ae,getViewportNodes:he,handleScrollH:zt,handleScrollV:Ot,init:Qe,layoutName:"frozen",realScrollHeightChange:Jt,reorderViewColumns:$t,resizeCanvas:Yt,setPaneVisibility:Gt,setScroller:Wt,setOverflow:Bt,updateCanvasWidth:j}};function Rt(l){return l.value==null||l.value===""?"-":l.value<50?"<span style='color:red; font-weight:bold;'>"+l.escape()+"%</span>":"<span style='color:green'>"+l.escape()+"%</span>"}function Lt(l){if(l.value==null||l.value==="")return"";var e;return l.value<30?e="red":l.value<70?e="silver":e="green","<span class='percent-complete-bar slick-percentcomplete-bar' style='background:"+e+";width:"+l.escape()+"%' title='"+l.escape()+"%'></span>"}function Tt(l){return l.value?"Yes":"No"}function Ht(l){return`<i class="slick-checkbox slick-edit-preclick${l.value?" checked":""}"></i>`}function xt(l){return l.value?'<i class="slick-checkmark"></i>':""}var Pt;(s=>{function l(r,n,a){return Rt({escape:G,value:a})}s.PercentComplete=l;function e(r,n,a){return Lt({escape:G,value:a})}s.PercentCompleteBar=e;function t(r,n,a){return Tt({escape:G,value:a})}s.YesNo=t;function i(r,n,a){return Ht({escape:G,value:a})}s.Checkbox=i;function o(r,n,a){return xt({escape:G,value:a})}s.Checkmark=o})(Pt||(Pt={}));var we=class{constructor(e){this._args=e,this.init()}destroy(){this._input.remove()}focus(){this._input.focus()}getValue(){return this._input.value}setValue(e){this._input.value=e!=null?e:""}loadValue(e){var t;this._defaultValue=(t=e[this._args.column.field])!=null?t:"",this._input.value=this._defaultValue,this._input.select&&(this._input.defaultValue=this._defaultValue,this._input.select())}serializeValue(){return this._input.value}applyValue(e,t){e[this._args.column.field]=t}isValueChanged(){return!(this._input.value===""&&this._defaultValue==null)&&this._input.value!=this._defaultValue}validate(){if(this._args.column.validator){var e=this._args.column.validator(this._input.value,this._args);if(!e.valid)return e}return{valid:!0,msg:null}}},me=class extends we{init(){let e=this._input=this._args.container.appendChild(p("input",{type:"text",class:"editor-text slick-editor-text"}));e.addEventListener("keydown",this._args.editorCellNavOnLRKeys?gi:pi),e.focus(),e.select(),Oe(this,this._args,e)}},Se=class extends me{serializeValue(){return parseInt(this._input.value,10)||0}validate(){return isNaN(parseInt(this._input.value,10))?{valid:!1,msg:"Please enter a valid integer"}:super.validate()}},ye=class ye extends me{getDecimalPlaces(){var e=this._args.column.editorFixedDecimalPlaces;return typeof e=="undefined"&&(e=ye.DefaultDecimalPlaces),!e&&e!==0?null:e}loadValue(e){this._defaultValue=e[this._args.column.field];var t=this.getDecimalPlaces();t!==null&&(this._defaultValue||this._defaultValue===0)&&this._defaultValue.toFixed&&(this._defaultValue=this._defaultValue.toFixed(t)),this._input.value=this._defaultValue,this._input.defaultValue=this._defaultValue,this._input.select()}serializeValue(){var e=parseFloat(this._input.value);ye.AllowEmptyValue?!e&&e!==0&&(e=""):e=e||0;var t=this.getDecimalPlaces();return t!==null&&(e||e===0)&&e.toFixed&&(e=parseFloat(e.toFixed(t))),e}validate(){return isNaN(parseFloat(this._input.value))?{valid:!1,msg:"Please enter a valid number"}:super.validate()}};ye.AllowEmptyValue=!1,ye.DefaultDecimalPlaces=null;var Fe=ye,ke=class extends me{constructor(){super(...arguments);this._calendarOpen=!1}init(){super.init(),$(this._input).datepicker({showOn:"button",buttonText:"",buttonImage:null,buttonImageOnly:!1,beforeShow:()=>{this._calendarOpen=!0},onClose:()=>{this._calendarOpen=!1,this._args.compositeEditorOptions&&st(this,this._args)}}),this._input.style.width=k(getComputedStyle(this._input).width)-(this._args.compositeEditorOptions?28:18)+"px"}destroy(){$.datepicker.dpDiv.stop(!0,!0),$(this._input).datepicker("hide").datepicker("destroy"),super.destroy()}show(){this._calendarOpen&&$.datepicker.dpDiv.stop(!0,!0).show()}hide(){this._calendarOpen&&$.datepicker.dpDiv.stop(!0,!0).hide()}position(t){this._calendarOpen&&$.datepicker.dpDiv.css("top",t.top+30).css("left",t.left)}},Ae=class extends we{init(){this._args.container.appendChild(this._input=p("select",{tabIndex:"0",class:"editor-yesno slick-editor-yesno"},p("option",{value:"yes"},"Yes"),p("option",{value:"no"},"No"))),this._input.focus(),Oe(this,this._args,this._input)}loadValue(e){this._input.value=(this._defaultValue=e[this._args.column.field])?"yes":"no"}serializeValue(){return this._input.value==="yes"}isValueChanged(){return this._input.value!=this._defaultValue}validate(){return{valid:!0,msg:null}}},Ne=class extends we{init(){this._input=this._args.container.appendChild(p("input",{type:"checkbox",value:"true",class:"editor-checkbox slick-editor-checkbox",hideFocus:!0})),this._input.focus(),Oe(this,this._args,this._input)}loadValue(e){this._defaultValue=!!e[this._args.column.field],this._input.checked=!!this._defaultValue}preClick(){this._input.checked=!this._input.checked}serializeValue(){return this._input.checked}applyValue(e,t){e[this._args.column.field]=t}isValueChanged(){return this.serializeValue()!==this._defaultValue}validate(){return{valid:!0,msg:null}}},Ve=class extends Se{init(){super.init(),this._input.classList.remove("editor-text","slick-editor-text"),this._input.classList.add("editor-percentcomplete","slick-editor-percentcomplete");var e;this._picker=this._args.container.appendChild(p("div",{class:"slick-editor-percentcomplete-picker"},p("div",{class:"slick-editor-percentcomplete-helper"},p("div",{class:"slick-editor-percentcomplete-wrapper"},p("div",{class:"slick-editor-percentcomplete-slider",ref:t=>e=t}),p("div",{class:"slick-editor-percentcomplete-buttons"},p("button",{"data-val":0},"Not started"),p("button",{"data-val":50},"In Progress"),p("button",{"data-val":100},"Complete")))))),this._input.focus(),this._input.select(),$(e).slider({orientation:"vertical",range:"min",value:this._defaultValue,slide:(t,i)=>{this._input.value=i.value},stop:()=>{this._args.compositeEditorOptions&&st(this,this._args)}}),$(this._picker).find(".slick-editor-percentcomplete-buttons button").on("click",t=>{this._input.value=t.target.dataset.val,$(e).slider("value",t.target.dataset.val)})}destroy(){super.destroy(),this._picker.remove()}},ze=class extends we{init(){let e=this._args.compositeEditorOptions;this._container=e?this._args.container:document.body,this._wrapper=this._container.appendChild(p("div",{class:"large-editor-text slick-large-editor-text",style:`z-index:10000; background:white; padding:5px; border:3px solid gray; border-radius:10px;${e?"position: relative; padding: 0; border: 0":"position: absolute"}`},p("textarea",{hidefocus:!0,rows:"5",style:"background:white; width:250px; height:80px; border:0; outline:0",ref:t=>this._input=t}))),e?Oe(this,this._args,this._input):(this._wrapper.appendChild(p("div",{style:"text-align: right"},p("button",{ref:t=>t.addEventListener("click",this.save.bind(this))},"Save"),p("button",{ref:t=>t.addEventListener("click",this.cancel.bind(this))},"Cancel"))),this._input.addEventListener("keydown",this.handleKeyDown.bind(this)),this.position(this._args.position)),this._input.focus(),this._input.select()}handleKeyDown(e){if(e.key==="Enter"&&e.ctrlKey)this.save();else if(e.key==="Esc"||e.key=="Escape")e.preventDefault(),this.cancel();else if(e.key==="Tab"&&e.shiftKey)e.preventDefault(),this._args.grid.navigatePrev();else if(e.key==="Tab")e.preventDefault(),this._args.grid.navigateNext();else if((e.key==="Left"||e.key==="ArrowLeft"||e.key==="Right"||e.key==="ArrowRight")&&this._args.editorCellNavOnLRKeys){var t=e.target.selectionStart,i=e.target.value.length;(e.key==="Left"||e.key==="ArrowLeft")&&t===0&&this._args.grid.navigatePrev(),(e.key==="Right"||e.key==="ArrowRight")&&t>=i-1&&this._args.grid.navigateNext()}}save(){this._args.commitChanges()}cancel(){this._input.value=this._defaultValue,this._args.cancelChanges()}hide(){this._wrapper.style.display="none"}show(){this._wrapper.style.display=null}position(e){this._wrapper.style.top=e.top-5+"px",this._wrapper.style.left=e.left-5+"px"}destroy(){this._wrapper.remove()}};function Oe(l,e,t){e.compositeEditorOptions&&t.addEventListener("change",()=>{st(l,e)})}function st(l,e){var t=e.grid.getActiveCell();l.validate().valid&&l.applyValue(e.item,l.serializeValue()),l.applyValue(e.compositeEditorOptions.formValues,l.serializeValue()),e.grid.onCompositeEditorChange.notify({row:t.row,cell:t.cell,item:e.item,column:e.column,formValues:e.compositeEditorOptions.formValues})}function gi(l){var e=this.selectionStart,t=this.value.length;((l.key==="Left"||l.key==="ArrowLeft")&&e>0||(l.key==="Right"||l.key==="ArrowRight")&&e<t-1)&&l.stopImmediatePropagation()}function pi(l){(l.key==="Left"||l.key==="ArrowLeft"||l.key==="Right"||l.key==="ArrowRight")&&l.stopImmediatePropagation()}var St;(a=>(a.Text=me,a.Integer=Se,a.Float=Fe,a.Date=ke,a.YesNoSelect=Ae,a.Checkbox=Ne,a.PercentComplete=Ve,a.LongText=ze))(St||(St={}));var ve=class ve{constructor(e){this.pluginName="GroupItemMetadataProvider";this.handleGridClick=(e,t)=>{var r,n,a,h,u,v,c;let i=(r=t==null?void 0:t.grid)!=null?r:this.grid;if(i){var o=i.getDataItem(t.row);if(!(!o||!(o instanceof xe)||!this.options.toggleCssClass||!e.target.classList.contains(this.options.toggleCssClass))){e.stopImmediatePropagation(),e.preventDefault();var s=i.getRenderedRange();(a=(n=i.getData()).setRefreshHints)==null||a.call(n,{ignoreDiffsBefore:s.top,ignoreDiffsAfter:s.bottom+1}),o.collapsed?(u=(h=i.getData()).expandGroup)==null||u.call(h,o.groupingKey):(c=(v=i.getData()).collapseGroup)==null||c.call(v,o.groupingKey)}}};this.handleGridKeyDown=(e,t)=>{var n,a,h,u,v,c,m;if(!this.options.enableExpandCollapse||e.key!==" "&&e.key!=="-"&&e.key!=="+")return;let i=(n=t==null?void 0:t.grid)!=null?n:this.grid;if(i){var o=i.getActiveCell();if(o){var s=i.getDataItem(o.row);if(!(!s||!(s instanceof xe))&&(e.stopImmediatePropagation(),e.preventDefault(),!(e.key=="+"&&!s.collapsed||e.key=="-"&&s.collapsed))){var r=i.getRenderedRange();(h=(a=i.getData()).setRefreshHints)==null||h.call(a,{ignoreDiffsBefore:r.top,ignoreDiffsAfter:r.bottom+1}),s.collapsed?(v=(u=i.getData()).expandGroup)==null||v.call(u,s.groupingKey):(m=(c=i.getData()).collapseGroup)==null||m.call(c,s.groupingKey)}}}};this.groupCellPosition=()=>{var r,n,a,h;let e={cell:0,colspan:"*"};if(!this.options.groupRowTotals||!this.grid)return e;for(var t=this.grid.getColumns(),i,o=0;o<t.length;o++)if(i=t[o],!((n=(r=this.options).hasSummaryType)!=null&&n.call(r,t[o]))){e.cell=o;break}e.colspan=0;for(var o=e.cell+1;o<t.length;o++){var s=t[o];if(!((h=(a=this.options).hasSummaryType)!=null&&h.call(a,s))&&!!(i!=null&&i.frozen)==!!(s!=null&&s.frozen))e.colspan++;else break}return e.colspan=Math.max(1,e.colspan),e};this.getGroupRowMetadata=e=>{let t=this.options,i=this.groupCellPosition(),o={selectable:!1,focusable:t.groupFocusable,cssClasses:t.groupCssClass+" "+t.groupLevelPrefix+(e==null?void 0:e.level),columns:{[i.cell]:{colspan:i.colspan,cssClasses:t.groupCellCssClass,format:t.groupFormat,editor:null}}};return t.groupRowTotals&&(o.format=t.totalsFormat),o};this.getTotalsRowMetadata=e=>{var i;let t=this.options;return{selectable:!1,focusable:t.totalsFocusable,cssClasses:t.totalsCssClass+" "+t.groupLevelPrefix+((i=e==null?void 0:e.group)==null?void 0:i.level),format:t.totalsFormat,editor:null}};var t,i,o,s;this.options=Object.assign({},ve.defaults,e),(i=(t=this.options).groupFormat)!=null||(t.groupFormat=e!=null&&e.groupFormatter?le(e.groupFormatter):r=>ve.defaultGroupFormat(r,this.options)),(s=(o=this.options).totalsFormat)!=null||(o.totalsFormat=e!=null&&e.totalsFormatter?le(e.totalsFormatter):r=>ve.defaultTotalsFormat(r,this.grid))}static defaultGroupFormat(e,t){t!=null||(t=ve.defaults);let i=e.item;if(!t.enableExpandCollapse)return i==null?void 0:i.title;let o=i.level*t.groupIndentation;return`<span class="${e.escape(t.toggleCssClass+" "+(i.collapsed?t.toggleCollapsedCssClass:t.toggleExpandedCssClass))}" style="margin-left: ${o}px">
<span class="${e.escape(t.groupTitleCssClass)}" level="${e.escape(i.level)}">${i.title}</span>`}static defaultTotalsFormat(e,t){var o,s,r,n,a,h;var i=e.item;return!i.__groupTotals&&i.totals&&(i=i.totals),(h=(a=(s=(o=e.column)==null?void 0:o.groupTotalsFormatter)==null?void 0:s.call(o,i,e.column))!=null?a:(n=(r=t!=null?t:e.grid)==null?void 0:r.groupTotalsFormatter)==null?void 0:n.call(r,i,e.column))!=null?h:""}init(e){this.grid=e,e.onClick.subscribe(this.handleGridClick),e.onKeyDown.subscribe(this.handleGridKeyDown)}destroy(){var e,t;this.grid&&((e=this.grid.onClick)==null||e.unsubscribe(this.handleGridClick),(t=this.grid.onKeyDown)==null||t.unsubscribe(this.handleGridKeyDown))}getOptions(){return this.options}setOptions(e){Object.assign(this.options,e)}};ve.defaults={enableExpandCollapse:!0,groupCellCssClass:"slick-group-cell",groupCssClass:"slick-group",groupFocusable:!0,groupIndentation:15,groupLevelPrefix:"slick-group-level-",groupTitleCssClass:"slick-group-title",hasSummaryType:e=>e.summaryType&&e.summaryType!=-1,totalsCssClass:"slick-group-totals",toggleCssClass:"slick-group-toggle",toggleCollapsedCssClass:"collapsed",toggleExpandedCssClass:"expanded",totalsFocusable:!1};var Dt=ve;var We=class We{constructor(e){this.handleMouseEnter=e=>{var s,r;var t=this.grid.getCellFromEvent(e);if(t){var i=this.grid.getCellNode(t.row,t.cell);if(i){var o;(!i.title||this.options.replaceExisting)&&(i.clientWidth<i.scrollWidth?(o=(r=(s=i.textContent)==null?void 0:s.trim())!=null?r:"",this.options.maxToolTipLength&&o.length>this.options.maxToolTipLength&&(o=o.substring(0,this.options.maxToolTipLength-3)+"...")):o="",i.title=o),i=null}}};this.handleHeaderMouseEnter=(e,t)=>{var i=t.column;if(i&&!i.toolTip){var o=e.target.closest(".slick-header-column");o&&(o.title=o.clientWidth<o.scrollWidth?i.name:"")}};this.pluginName="AutoTooltips";this.options=Object.assign({},We.defaults,e)}init(e){this.grid=e,this.options.enableForCells&&this.grid.onMouseEnter.subscribe(this.handleMouseEnter),this.options.enableForHeaderCells&&this.grid.onHeaderMouseEnter.subscribe(this.handleHeaderMouseEnter)}destroy(){this.options.enableForCells&&this.grid.onMouseEnter.unsubscribe(this.handleMouseEnter),this.options.enableForHeaderCells&&this.grid.onHeaderMouseEnter.unsubscribe(this.handleHeaderMouseEnter)}};We.defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:null,replaceExisting:!0};var It=We;var Ge=class Ge{constructor(e){this.handler=new Ce;this.onBeforeMoveRows=new L;this.onMoveRows=new L;this.options=Object.assign({},Ge.defaults,e)}init(e){this.grid=e,this.handler.subscribe(e.onDragInit,this.handleDragInit.bind(this)).subscribe(e.onDragStart,this.handleDragStart.bind(this)).subscribe(e.onDrag,this.handleDrag.bind(this)).subscribe(e.onDragEnd,this.handleDragEnd.bind(this))}destroy(){var e;(e=this.handler)==null||e.unsubscribeAll()}handleDragInit(e){e.stopImmediatePropagation()}handleDragStart(e,t){let i=this.grid.getCellFromEvent(e);if(this.options.cancelEditOnDrag&&this.grid.getEditorLock().isActive()&&this.grid.getEditorLock().cancelCurrentEdit(),this.grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this.grid.getColumns()[i.cell].behavior))return!1;this.dragging=!0,e.stopImmediatePropagation();let o=this.grid.getSelectedRows();(o.length==0||o.indexOf(i.row)==-1)&&(o=[i.row],this.grid.setSelectedRows(o));let s=this.grid.getOptions().rowHeight;t.selectedRows=o;let r=this.grid.getCanvasNode();t.selectionProxy=r.appendChild(p("div",{class:"slick-reorder-proxy",style:`position: absolute; z-index: 9999; width: ${r.clientWidth}px; height: ${s*o.length}px`})),t.guide=r.appendChild(p("div",{class:"slick-reorder-guide",style:`position: absolute; z-index: 99998; width: ${r.clientWidth}px; top: -1000`})),t.insertBefore=-1}handleDrag(e,t){if(!this.dragging)return;e.stopImmediatePropagation();let o=this.grid.getCanvasNode().getBoundingClientRect(),s=document.documentElement,r=o.top+window.scrollY-s.clientTop,n=e.pageY-r;t.selectionProxy.style.top=n-5+"px";let a=Math.max(0,Math.min(Math.round(n/this.grid.getOptions().rowHeight),this.grid.getDataLength()));if(a!==t.insertBefore){let h={rows:t.selectedRows,insertBefore:a};this.onBeforeMoveRows.notify(h)===!1?(t.guide.style.top="-1000",t.canMove=!1):(t.guide.style.top=a*this.grid.getOptions().rowHeight+"px",t.canMove=!0),t.insertBefore=a}}handleDragEnd(e,t){if(this.dragging&&(this.dragging=!1,e.stopImmediatePropagation(),t.guide.remove(),t.selectionProxy.remove(),t.canMove)){let i={rows:t.selectedRows,insertBefore:t.insertBefore};this.onMoveRows.notify(i)}}};Ge.defaults={cancelEditOnDrag:!1};var Mt=Ge;function mi(l,e){let t,i=[];for(t=l;t<=e;t++)i.push(t);for(t=e;t<l;t++)i.push(t);return i}function Ft(l){let e=[];for(let t=0;t<l.length;t++)for(let i=l[t].fromRow;i<=l[t].toRow;i++)e.push(i);return e}var Be=class Be{constructor(e){this.handler=new Ce;this.onSelectedRangesChanged=new L;this.options=Object.assign({},Be.defaults,e)}init(e){this.grid=e,this.handler.subscribe(e.onActiveCellChanged,this.wrapHandler(this.handleActiveCellChange)),this.handler.subscribe(e.onKeyDown,this.wrapHandler(this.handleKeyDown)),this.handler.subscribe(e.onClick,this.wrapHandler(this.handleClick))}destroy(){var e;(e=this.handler)==null||e.unsubscribeAll()}wrapHandler(e){return function(){this.inHandler||(this.inHandler=!0,e.apply(this,arguments),this.inHandler=!1)}.bind(this)}rowsToRanges(e){let t=[],i=this.grid.getColumns().length-1;for(let o=0;o<e.length;o++)t.push(new pe(e[o],0,e[o],i));return t}getSelectedRows(){return Ft(this.ranges)}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e))}setSelectedRanges(e){(!this.ranges||this.ranges.length===0)&&(!e||e.length===0)||(this.ranges=e,this.onSelectedRangesChanged.notify(this.ranges))}getSelectedRanges(){return this.ranges}handleActiveCellChange(e,t){this.options.selectActiveRow&&t.row!=null&&this.setSelectedRanges([new pe(t.row,0,t.row,this.grid.getColumns().length-1)])}handleKeyDown(e){let t=this.grid.getActiveCell();if(!(t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.which==38||e.which==40)))return;let i=this.getSelectedRows();i.sort(function(n,a){return n-a}),i.length||(i=[t.row]);let o=i[0],s=i[i.length-1],r;e.which==40?r=t.row<s||o==s?++s:++o:r=t.row<s?--s:--o,r>=0&&r<this.grid.getDataLength()&&(this.grid.scrollRowIntoView(r),this.ranges=this.rowsToRanges(mi(o,s)),this.setSelectedRanges(this.ranges)),e.preventDefault(),e.stopPropagation()}handleClick(e){let t=this.grid.getCellFromEvent(e);if(!t||!this.grid.canCellBeActive(t.row,t.cell)||!this.grid.getOptions().multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;let i=Ft(this.ranges),o=i.indexOf(t.row);if(o===-1&&(e.ctrlKey||e.metaKey))i.push(t.row),this.grid.setActiveCell(t.row,t.cell);else if(o!==-1&&(e.ctrlKey||e.metaKey))i=i.filter(s=>s!==t.row),this.grid.setActiveCell(t.row,t.cell);else if(i.length&&e.shiftKey){let s=i.pop(),r=Math.min(t.row,s),n=Math.max(t.row,s);i=[];for(let a=r;a<=n;a++)a!==s&&i.push(a);i.push(s),this.grid.setActiveCell(t.row,t.cell)}return this.ranges=this.rowsToRanges(i),this.setSelectedRanges(this.ranges),e.stopImmediatePropagation(),!0}};Be.defaults={selectActiveRow:!0};var kt=Be;export{It as AutoTooltips,$e as BasicLayout,pe as CellRange,Ne as CheckboxCellEdit,Ht as CheckboxFormatter,xt as CheckmarkFormatter,ke as DateCellEdit,Ye as EditorLock,St as Editors,Te as EventData,L as EventEmitter,Ce as EventSubscriber,Fe as FloatCellEdit,Pt as Formatters,Mo as FrozenLayout,dt as GlobalEditorLock,Et as Grid,xe as Group,Dt as GroupItemMetadataProvider,mt as GroupTotals,p as H,Se as IntegerCellEdit,ze as LongTextCellEdit,Le as NonDataRow,Lt as PercentCompleteBarFormatter,Ve as PercentCompleteCellEdit,Rt as PercentCompleteFormatter,Mt as RowMoveManager,kt as RowSelectionModel,me as TextCellEdit,Tt as YesNoFormatter,Ae as YesNoSelectCellEdit,ne as addClass,pt as applyFormatterResultToCellNode,gt as basicRegexSanitizer,at as columnDefaults,le as convertCompatFormatter,Ie as defaultColumnFormat,He as disableSelection,G as escapeHtml,vt as gridDefaults,ht as initializeColumns,_i as keyCode,k as parsePx,hi as patchEvent,lt as preClickClassName,De as removeClass,ge as spacerDiv,ai as titleize};
//# sourceMappingURL=index.js.map

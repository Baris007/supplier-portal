{
  "version": 3,
  "sources": ["../../../../../Modules/Administration/Role/RolePage.ts", "../../../../../Modules/Administration/RolePermission/RolePermissionDialog.ts", "../../../../../Modules/Administration/Role/RoleDialog.ts", "../../../../../Modules/Administration/Role/RoleGrid.ts"],
  "sourcesContent": ["import { gridPageInit } from \"@serenity-is/corelib\";\r\nimport { RoleGrid } from \"./RoleGrid\";\r\n\r\nexport default () => gridPageInit(RoleGrid);", "import { Decorators, TemplatedDialog } from \"@serenity-is/corelib\";\r\nimport { format, getRemoteData, notifySuccess, localText } from \"@serenity-is/corelib\";\r\nimport { RolePermissionService, UserPermissionRow } from \"../\";\r\nimport { PermissionCheckEditor } from \"../UserPermission/PermissionCheckEditor\";\r\n\r\nexport class RolePermissionDialog extends TemplatedDialog<RolePermissionDialogOptions> {\r\n\r\n    private permissions: PermissionCheckEditor;\r\n\r\n    constructor(opt: RolePermissionDialogOptions) {\r\n        super(opt);\r\n\r\n        this.permissions = new PermissionCheckEditor({ element: this.byId('Permissions'), ... {\r\n            showRevoke: false\r\n        }});\r\n\r\n        RolePermissionService.List({\r\n            RoleID: this.options.roleID\r\n        }, response => {\r\n            this.permissions.value = response.Entities.map(x => (<UserPermissionRow>{ PermissionKey: x }));\r\n        });\r\n\r\n        this.permissions.implicitPermissions = getRemoteData('Administration.ImplicitPermissions');\r\n    }\r\n\r\n    protected getDialogOptions()  {\r\n        let opt = super.getDialogOptions();\r\n\r\n        opt.buttons = [\r\n            {\r\n                text: localText('Dialogs.OkButton'),\r\n                click: e => {\r\n                    RolePermissionService.Update({\r\n                        RoleID: this.options.roleID,\r\n                        Permissions: this.permissions.value.map(x => x.PermissionKey)\r\n                    }, response => {\r\n                        this.dialogClose();\r\n                        window.setTimeout(() => notifySuccess(localText('Site.RolePermissionDialog.SaveSuccess')), 0);\r\n                    });\r\n                }\r\n            }, {\r\n                text: localText('Dialogs.CancelButton'),\r\n                click: () => this.dialogClose()\r\n            }];\r\n\r\n        opt.title = format(localText('Site.RolePermissionDialog.DialogTitle'),\r\n            this.options.title);\r\n\r\n        return opt;\r\n    }\r\n\r\n    protected getTemplate(): string {\r\n        return '<div id=\"~_Permissions\"></div>';\r\n    }\r\n}\r\n\r\nexport interface RolePermissionDialogOptions {\r\n    roleID?: number;\r\n    title?: string;\r\n}", "\uFEFFimport { RoleRow, RoleForm, RoleService } from \"../\";\r\nimport { RolePermissionDialog } from \"../RolePermission/RolePermissionDialog\";\r\nimport { Texts } from \"../../ServerTypes/Texts\"\r\nimport { Decorators, EntityDialog } from \"@serenity-is/corelib\";\r\n\r\nconst editPermissions = \"edit-permissions\";\r\n\r\n@Decorators.registerClass('SupplierPortal.Administration.RoleDialog')\r\nexport class RoleDialog extends EntityDialog<RoleRow, any> {\r\n    protected getFormKey() { return RoleForm.formKey; }\r\n    protected getIdProperty() { return RoleRow.idProperty; }\r\n    protected getLocalTextPrefix() { return RoleRow.localTextPrefix; }\r\n    protected getNameProperty() { return RoleRow.nameProperty; }\r\n    protected getService() { return RoleService.baseUrl; }\r\n\r\n    protected form = new RoleForm(this.idPrefix);\r\n\r\n    protected getToolbarButtons()\r\n    {\r\n        let buttons = super.getToolbarButtons();\r\n\r\n        buttons.push({\r\n            title: Texts.Site.RolePermissionDialog.EditButton,\r\n            cssClass: editPermissions,\r\n            icon: 'fa-lock text-green',\r\n            onClick: () =>\r\n            {\r\n                new RolePermissionDialog({\r\n                    roleID: this.entity.RoleId,\r\n                    title: this.entity.RoleName\r\n                }).dialogOpen();\r\n            }\r\n        });\r\n\r\n        return buttons;\r\n    }\r\n\r\n    protected updateInterface() {\r\n        super.updateInterface();\r\n\r\n        this.toolbar.findButton(editPermissions).toggleClass(\"disabled\", this.isNewOrDeleted());\r\n    }\r\n}", "\uFEFFimport { RoleDialog } from \"./RoleDialog\";\r\nimport { RoleColumns, RoleRow, RoleService } from \"../\";\r\nimport { Decorators, EntityGrid } from \"@serenity-is/corelib\";\r\n\r\n@Decorators.registerClass('SupplierPortal.Administration.RoleGrid')\r\nexport class RoleGrid extends EntityGrid<RoleRow, any> {\r\n    protected getColumnsKey() { return RoleColumns.columnsKey; }\r\n    protected getDialogType() { return RoleDialog; }\r\n    protected getIdProperty() { return RoleRow.idProperty; }\r\n    protected getLocalTextPrefix() { return RoleRow.localTextPrefix; }\r\n    protected getService() { return RoleService.baseUrl; }\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n\r\n    protected getDefaultSortBy() {\r\n        return [RoleRow.Fields.RoleName];\r\n    }\r\n}"],
  "mappings": "2RAAA,IAAAA,EAA6B,SCA7B,IAAAC,EAA4C,SAC5CA,EAAgE,SAIzD,IAAMC,EAAN,MAAMA,UAA6B,iBAA6C,CAInF,YAAYC,EAAkC,CAC1C,MAAMA,CAAG,EAET,KAAK,YAAc,IAAIC,EAAsB,CAAE,QAAS,KAAK,KAAK,aAAa,EAC3E,WAAY,EACf,CAAC,EAEFC,EAAsB,KAAK,CACvB,OAAQ,KAAK,QAAQ,MACzB,EAAGC,GAAY,CACX,KAAK,YAAY,MAAQA,EAAS,SAAS,IAAIC,IAAyB,CAAE,cAAeA,CAAE,EAAE,CACjG,CAAC,EAED,KAAK,YAAY,uBAAsB,iBAAc,oCAAoC,CAC7F,CAEU,kBAAoB,CAC1B,IAAIJ,EAAM,MAAM,iBAAiB,EAEjC,OAAAA,EAAI,QAAU,CACV,CACI,QAAM,aAAU,kBAAkB,EAClC,MAAOK,EAAAC,GAAK,CACRJ,EAAsB,OAAO,CACzB,OAAQ,KAAK,QAAQ,OACrB,YAAa,KAAK,YAAY,MAAM,IAAIE,GAAKA,EAAE,aAAa,CAChE,EAAGD,GAAY,CACX,KAAK,YAAY,EACjB,OAAO,WAAW,OAAM,oBAAc,aAAU,uCAAuC,CAAC,EAAG,CAAC,CAChG,CAAC,CACL,EARO,QASX,EAAG,CACC,QAAM,aAAU,sBAAsB,EACtC,MAAOE,EAAA,IAAM,KAAK,YAAY,EAAvB,QACX,CAAC,EAELL,EAAI,SAAQ,aAAO,aAAU,uCAAuC,EAChE,KAAK,QAAQ,KAAK,EAEfA,CACX,CAEU,aAAsB,CAC5B,MAAO,gCACX,CACJ,EAjDuFK,EAAAN,EAAA,wBAAhF,IAAMQ,EAANR,ECFP,IAAAS,EAAyC,SAEzC,IAAMC,EAAkB,mBALxBC,EAAAC,EAAAC,EAOAF,EAAA,CAAC,aAAW,cAAc,0CAA0C,GAC7D,IAAMG,EAAN,MAAMA,UAAmBD,EAAA,eAA2B,CAApD,kCAOH,KAAU,KAAO,IAAIE,EAAS,KAAK,QAAQ,EANjC,YAAa,CAAE,OAAOA,EAAS,OAAS,CACxC,eAAgB,CAAE,OAAOC,EAAQ,UAAY,CAC7C,oBAAqB,CAAE,OAAOA,EAAQ,eAAiB,CACvD,iBAAkB,CAAE,OAAOA,EAAQ,YAAc,CACjD,YAAa,CAAE,OAAOC,EAAY,OAAS,CAI3C,mBACV,CACI,IAAIC,EAAU,MAAM,kBAAkB,EAEtC,OAAAA,EAAQ,KAAK,CACT,MAAOC,EAAM,KAAK,qBAAqB,WACvC,SAAUT,EACV,KAAM,qBACN,QAASU,EAAA,IACT,CACI,IAAIC,EAAqB,CACrB,OAAQ,KAAK,OAAO,OACpB,MAAO,KAAK,OAAO,QACvB,CAAC,EAAE,WAAW,CAClB,EANS,UAOb,CAAC,EAEMH,CACX,CAEU,iBAAkB,CACxB,MAAM,gBAAgB,EAEtB,KAAK,QAAQ,WAAWR,CAAe,EAAE,YAAY,WAAY,KAAK,eAAe,CAAC,CAC1F,CACJ,EAlCOE,EAAAU,EAAAT,GAAMC,EAANS,EAAAX,EAAA,eADPD,EACaG,GAA8CM,EAAAN,EAAA,cAApDU,EAAAZ,EAAA,EAAME,GAAN,IAAMW,EAANX,ECNP,IAAAY,EAAuC,SAFvC,IAAAC,EAAAC,EAAAC,EAIAF,EAAA,CAAC,aAAW,cAAc,wCAAwC,GAC3D,IAAMG,EAAN,MAAMA,UAAiBD,EAAA,aAAyB,CACzC,eAAgB,CAAE,OAAOE,EAAY,UAAY,CACjD,eAAgB,CAAE,OAAOC,CAAY,CACrC,eAAgB,CAAE,OAAOC,EAAQ,UAAY,CAC7C,oBAAqB,CAAE,OAAOA,EAAQ,eAAiB,CACvD,YAAa,CAAE,OAAOC,EAAY,OAAS,CAErD,YAAYC,EAAY,CACpB,MAAMA,CAAK,CACf,CAEU,kBAAmB,CACzB,MAAO,CAACF,EAAQ,OAAO,QAAQ,CACnC,CACJ,EAdOL,EAAAQ,EAAAP,GAAMC,EAANO,EAAAT,EAAA,aADPD,EACaG,GAA0CQ,EAAAR,EAAA,YAAhDS,EAAAX,EAAA,EAAME,GAAN,IAAMU,EAANV,EHFP,IAAOW,EAAQC,EAAA,OAAM,gBAAaC,CAAQ,EAA3B",
  "names": ["import_corelib", "import_corelib", "_RolePermissionDialog", "opt", "PermissionCheckEditor", "RolePermissionService", "response", "x", "__name", "e", "RolePermissionDialog", "import_corelib", "editPermissions", "_RoleDialog_decorators", "_init", "_a", "_RoleDialog", "RoleForm", "RoleRow", "RoleService", "buttons", "Texts", "__name", "RolePermissionDialog", "__decoratorStart", "__decorateElement", "__runInitializers", "RoleDialog", "import_corelib", "_RoleGrid_decorators", "_init", "_a", "_RoleGrid", "RoleColumns", "RoleDialog", "RoleRow", "RoleService", "props", "__decoratorStart", "__decorateElement", "__name", "__runInitializers", "RoleGrid", "RolePage_default", "__name", "RoleGrid"]
}
